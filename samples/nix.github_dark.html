<pre class="athl w-full overflow-auto rounded-lg p-8 font-mono text-sm antialiased leading-6" style="color: #e6edf3; background-color: #30363d;"><code class="language-nix" translate="no" tabindex="0"><span class="line" data-line="1"><span data-highlight="keyword" style="color: #ff7b72;">with</span> <span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="constant.builtin" style="color: #79c0ff;">builtins</span></span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">[</span>
</span><span class="line" data-line="2">
</span><span class="line" data-line="3">  <span data-highlight="comment" style="color: #8b949e;">#  Comments</span>
</span><span class="line" data-line="4">  <span data-highlight="comment" style="color: #8b949e;">#=========================================</span>
</span><span class="line" data-line="5">
</span><span class="line" data-line="6">  <span data-highlight="comment" style="color: #8b949e;"># Inline comments look like this.</span>
</span><span class="line" data-line="7">
</span><span class="line" data-line="8">  <span data-highlight="comment" style="color: #8b949e;">/* Multi-line comments</span>
</span><span class="line" data-line="9"><span data-highlight="comment" style="color: #8b949e;">     look like this. */</span>
</span><span class="line" data-line="10">
</span><span class="line" data-line="11">
</span><span class="line" data-line="12">  <span data-highlight="comment" style="color: #8b949e;">#  Booleans</span>
</span><span class="line" data-line="13">  <span data-highlight="comment" style="color: #8b949e;">#=========================================</span>
</span><span class="line" data-line="14">
</span><span class="line" data-line="15">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="boolean" style="color: #79c0ff;">true</span></span> <span data-highlight="operator" style="color: #79c0ff;">&amp;&amp;</span> <span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="boolean" style="color: #79c0ff;">false</span></span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>               <span data-highlight="comment" style="color: #8b949e;"># And</span>
</span><span class="line" data-line="16">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; false</span>
</span><span class="line" data-line="17">
</span><span class="line" data-line="18">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="boolean" style="color: #79c0ff;">true</span></span> <span data-highlight="operator" style="color: #79c0ff;">||</span> <span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="boolean" style="color: #79c0ff;">false</span></span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>               <span data-highlight="comment" style="color: #8b949e;"># Or</span>
</span><span class="line" data-line="19">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; true</span>
</span><span class="line" data-line="20">
</span><span class="line" data-line="21">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="keyword.conditional" style="color: #ff7b72;">if</span> <span data-highlight="number" style="color: #79c0ff;">3</span> <span data-highlight="operator" style="color: #79c0ff;">&lt;</span> <span data-highlight="number" style="color: #79c0ff;">4</span> <span data-highlight="keyword.conditional" style="color: #ff7b72;">then</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">a</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span> <span data-highlight="keyword.conditional" style="color: #ff7b72;">else</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">b</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>  <span data-highlight="comment" style="color: #8b949e;"># Conditional</span>
</span><span class="line" data-line="22">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; &quot;a&quot;</span>
</span><span class="line" data-line="23">
</span><span class="line" data-line="24">
</span><span class="line" data-line="25">  <span data-highlight="comment" style="color: #8b949e;">#  Integers and Floats</span>
</span><span class="line" data-line="26">  <span data-highlight="comment" style="color: #8b949e;">#=========================================</span>
</span><span class="line" data-line="27">
</span><span class="line" data-line="28">  <span data-highlight="comment" style="color: #8b949e;"># There are two numeric types: integers and floats</span>
</span><span class="line" data-line="29">
</span><span class="line" data-line="30">  <span data-highlight="number" style="color: #79c0ff;">1</span> <span data-highlight="number" style="color: #79c0ff;">0</span> <span data-highlight="number" style="color: #79c0ff;">42</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="operator" style="color: #79c0ff;"><span data-highlight="number" style="color: #79c0ff;">-<span data-highlight="number" style="color: #79c0ff;">3</span></span></span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>       <span data-highlight="comment" style="color: #8b949e;"># Some integers</span>
</span><span class="line" data-line="31">
</span><span class="line" data-line="32">  <span data-highlight="number.float" style="color: #79c0ff;">123.43</span> <span data-highlight="number.float" style="color: #79c0ff;">.27e13</span>     <span data-highlight="comment" style="color: #8b949e;"># A couple of floats</span>
</span><span class="line" data-line="33">
</span><span class="line" data-line="34">  <span data-highlight="comment" style="color: #8b949e;"># Operations will preserve numeric type</span>
</span><span class="line" data-line="35">
</span><span class="line" data-line="36">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="number" style="color: #79c0ff;">4</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="number" style="color: #79c0ff;">6</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="number" style="color: #79c0ff;">12</span> <span data-highlight="operator" style="color: #79c0ff;">-</span> <span data-highlight="number" style="color: #79c0ff;">2</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>  <span data-highlight="comment" style="color: #8b949e;"># Addition</span>
</span><span class="line" data-line="37">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; 20</span>
</span><span class="line" data-line="38">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="number" style="color: #79c0ff;">4</span> <span data-highlight="operator" style="color: #79c0ff;">-</span> <span data-highlight="number.float" style="color: #79c0ff;">2.5</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="39">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; 1.5</span>
</span><span class="line" data-line="40">
</span><span class="line" data-line="41">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="number" style="color: #79c0ff;">7</span> <span data-highlight="operator" style="color: #79c0ff;">/</span> <span data-highlight="number" style="color: #79c0ff;">2</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>           <span data-highlight="comment" style="color: #8b949e;"># Division</span>
</span><span class="line" data-line="42">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; 3</span>
</span><span class="line" data-line="43">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="number" style="color: #79c0ff;">7</span> <span data-highlight="operator" style="color: #79c0ff;">/</span> <span data-highlight="number.float" style="color: #79c0ff;">2.0</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="44">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; 3.5</span>
</span><span class="line" data-line="45">
</span><span class="line" data-line="46">
</span><span class="line" data-line="47">  <span data-highlight="comment" style="color: #8b949e;">#  Strings</span>
</span><span class="line" data-line="48">  <span data-highlight="comment" style="color: #8b949e;">#=========================================</span>
</span><span class="line" data-line="49">
</span><span class="line" data-line="50">  <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">Strings literals are in double quotes.</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span>
</span><span class="line" data-line="51">
</span><span class="line" data-line="52">  <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;"></span>
</span><span class="line" data-line="53"><span data-highlight="string" style="color: #a5d6ff;">    String literals can span</span>
</span><span class="line" data-line="54"><span data-highlight="string" style="color: #a5d6ff;">    multiple lines.</span>
</span><span class="line" data-line="55"><span data-highlight="string" style="color: #a5d6ff;">  </span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span>
</span><span class="line" data-line="56">
</span><span class="line" data-line="57">  <span data-highlight="string" style="color: #a5d6ff;">&#39;&#39;</span><span data-highlight="string" style="color: #a5d6ff;"></span>
</span><span class="line" data-line="58"><span data-highlight="string" style="color: #a5d6ff;">    This is called an &quot;indented string&quot; literal.</span>
</span><span class="line" data-line="59"><span data-highlight="string" style="color: #a5d6ff;">    It intelligently strips leading whitespace.</span>
</span><span class="line" data-line="60"><span data-highlight="string" style="color: #a5d6ff;">  </span><span data-highlight="string" style="color: #a5d6ff;">&#39;&#39;</span>
</span><span class="line" data-line="61">
</span><span class="line" data-line="62">  <span data-highlight="string" style="color: #a5d6ff;">&#39;&#39;</span><span data-highlight="string" style="color: #a5d6ff;"></span>
</span><span class="line" data-line="63"><span data-highlight="string" style="color: #a5d6ff;">    a</span>
</span><span class="line" data-line="64"><span data-highlight="string" style="color: #a5d6ff;">      b</span>
</span><span class="line" data-line="65"><span data-highlight="string" style="color: #a5d6ff;">  </span><span data-highlight="string" style="color: #a5d6ff;">&#39;&#39;</span>
</span><span class="line" data-line="66">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; &quot;a\n  b&quot;</span>
</span><span class="line" data-line="67">
</span><span class="line" data-line="68">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">ab</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">cd</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>   <span data-highlight="comment" style="color: #8b949e;"># String concatenation</span>
</span><span class="line" data-line="69">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; &quot;abcd&quot;</span>
</span><span class="line" data-line="70">
</span><span class="line" data-line="71">  <span data-highlight="comment" style="color: #8b949e;"># String interpolation (formerly known as &quot;antiquotation&quot;) lets you embed values into strings.</span>
</span><span class="line" data-line="72">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">Your home directory is </span><span data-highlight="punctuation.special" style="color: #e6edf3;">$&lbrace;</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="function.builtin" style="color: #d2a8ff;">getEnv</span></span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">HOME</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.special" style="color: #e6edf3;">&rbrace;</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="73">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; &quot;Your home directory is /home/alice&quot;</span>
</span><span class="line" data-line="74">
</span><span class="line" data-line="75">
</span><span class="line" data-line="76">  <span data-highlight="comment" style="color: #8b949e;">#  Paths</span>
</span><span class="line" data-line="77">  <span data-highlight="comment" style="color: #8b949e;">#=========================================</span>
</span><span class="line" data-line="78">
</span><span class="line" data-line="79">  <span data-highlight="comment" style="color: #8b949e;"># Nix has a primitive data type for paths.</span>
</span><span class="line" data-line="80">  <span data-highlight="string.special.path" style="color: #e6edf3;">/tmp/tutorials/learn.nix</span>
</span><span class="line" data-line="81">
</span><span class="line" data-line="82">  <span data-highlight="comment" style="color: #8b949e;"># A relative path is resolved to an absolute path at parse</span>
</span><span class="line" data-line="83">  <span data-highlight="comment" style="color: #8b949e;"># time, relative to the file in which it occurs.</span>
</span><span class="line" data-line="84">  <span data-highlight="string.special.path" style="color: #e6edf3;">tutorials/learn.nix</span>
</span><span class="line" data-line="85">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; /the-base-path/tutorials/learn.nix</span>
</span><span class="line" data-line="86">
</span><span class="line" data-line="87">  <span data-highlight="comment" style="color: #8b949e;"># A path must contain at least one slash, so a relative</span>
</span><span class="line" data-line="88">  <span data-highlight="comment" style="color: #8b949e;"># path for a file in the same directory needs a ./ prefix,</span>
</span><span class="line" data-line="89">  <span data-highlight="string.special.path" style="color: #e6edf3;">./learn.nix</span>
</span><span class="line" data-line="90">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; /the-base-path/learn.nix</span>
</span><span class="line" data-line="91">
</span><span class="line" data-line="92">  <span data-highlight="comment" style="color: #8b949e;"># The / operator must be surrounded by whitespace if</span>
</span><span class="line" data-line="93">  <span data-highlight="comment" style="color: #8b949e;"># you want it to signify division.</span>
</span><span class="line" data-line="94">
</span><span class="line" data-line="95">  <span data-highlight="string.special.path" style="color: #e6edf3;">7/2</span>        <span data-highlight="comment" style="color: #8b949e;"># This is a path literal</span>
</span><span class="line" data-line="96">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="number" style="color: #79c0ff;">7</span> <span data-highlight="operator" style="color: #79c0ff;">/</span> <span data-highlight="number" style="color: #79c0ff;">2</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>    <span data-highlight="comment" style="color: #8b949e;"># This is integer division</span>
</span><span class="line" data-line="97">
</span><span class="line" data-line="98">
</span><span class="line" data-line="99">  <span data-highlight="comment" style="color: #8b949e;">#  Imports</span>
</span><span class="line" data-line="100">  <span data-highlight="comment" style="color: #8b949e;">#=========================================</span>
</span><span class="line" data-line="101">
</span><span class="line" data-line="102">  <span data-highlight="comment" style="color: #8b949e;"># A nix file contains a single top-level expression with no free</span>
</span><span class="line" data-line="103">  <span data-highlight="comment" style="color: #8b949e;"># variables. An import expression evaluates to the value of the</span>
</span><span class="line" data-line="104">  <span data-highlight="comment" style="color: #8b949e;"># file that it imports.</span>
</span><span class="line" data-line="105">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="keyword.import" style="color: #ff7b72;">import</span></span> <span data-highlight="string.special.path" style="color: #e6edf3;">/tmp/foo.nix</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="106">
</span><span class="line" data-line="107">  <span data-highlight="comment" style="color: #8b949e;"># Imports can also be specified by strings.</span>
</span><span class="line" data-line="108">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="keyword.import" style="color: #ff7b72;">import</span></span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">/tmp/foo.nix</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="109">
</span><span class="line" data-line="110">  <span data-highlight="comment" style="color: #8b949e;"># Import paths must be absolute. Path literals</span>
</span><span class="line" data-line="111">  <span data-highlight="comment" style="color: #8b949e;"># are automatically resolved, so this is fine.</span>
</span><span class="line" data-line="112">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="keyword.import" style="color: #ff7b72;">import</span></span> <span data-highlight="string.special.path" style="color: #e6edf3;">./foo.nix</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="113">
</span><span class="line" data-line="114">  <span data-highlight="comment" style="color: #8b949e;"># But this does not happen with strings.</span>
</span><span class="line" data-line="115">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="keyword.import" style="color: #ff7b72;">import</span></span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">./foo.nix</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="116">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; error: string ‘foo.nix’ doesn&#39;t represent an absolute path</span>
</span><span class="line" data-line="117">
</span><span class="line" data-line="118">
</span><span class="line" data-line="119">  <span data-highlight="comment" style="color: #8b949e;">#  Let</span>
</span><span class="line" data-line="120">  <span data-highlight="comment" style="color: #8b949e;">#=========================================</span>
</span><span class="line" data-line="121">
</span><span class="line" data-line="122">  <span data-highlight="comment" style="color: #8b949e;"># `let` blocks allow us to bind values to variables.</span>
</span><span class="line" data-line="123">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="keyword" style="color: #ff7b72;">let</span> x <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">a</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="keyword" style="color: #ff7b72;">in</span>
</span><span class="line" data-line="124">    <span data-highlight="variable" style="color: #e6edf3;">x</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="variable" style="color: #e6edf3;">x</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="variable" style="color: #e6edf3;">x</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="125">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; &quot;aaa&quot;</span>
</span><span class="line" data-line="126">
</span><span class="line" data-line="127">  <span data-highlight="comment" style="color: #8b949e;"># Bindings can refer to each other, and their order does not matter.</span>
</span><span class="line" data-line="128">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="keyword" style="color: #ff7b72;">let</span> y <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="variable" style="color: #e6edf3;">x</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">b</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span>
</span><span class="line" data-line="129">       x <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">a</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="keyword" style="color: #ff7b72;">in</span>
</span><span class="line" data-line="130">    <span data-highlight="variable" style="color: #e6edf3;">y</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">c</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="131">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; &quot;abc&quot;</span>
</span><span class="line" data-line="132">
</span><span class="line" data-line="133">  <span data-highlight="comment" style="color: #8b949e;"># Inner bindings shadow outer bindings.</span>
</span><span class="line" data-line="134">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="keyword" style="color: #ff7b72;">let</span> a <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">1</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="keyword" style="color: #ff7b72;">in</span>
</span><span class="line" data-line="135">    <span data-highlight="keyword" style="color: #ff7b72;">let</span> a <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">2</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="keyword" style="color: #ff7b72;">in</span>
</span><span class="line" data-line="136">      <span data-highlight="variable" style="color: #e6edf3;">a</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="137">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; 2</span>
</span><span class="line" data-line="138">
</span><span class="line" data-line="139">
</span><span class="line" data-line="140">  <span data-highlight="comment" style="color: #8b949e;">#  Functions</span>
</span><span class="line" data-line="141">  <span data-highlight="comment" style="color: #8b949e;">#=========================================</span>
</span><span class="line" data-line="142">
</span><span class="line" data-line="143">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable.parameter" style="color: #e6edf3;">n</span><span data-highlight="punctuation.special" style="color: #e6edf3;">:</span> <span data-highlight="variable" style="color: #e6edf3;">n</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="number" style="color: #79c0ff;">1</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>      <span data-highlight="comment" style="color: #8b949e;"># Function that adds 1</span>
</span><span class="line" data-line="144">
</span><span class="line" data-line="145">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable.parameter" style="color: #e6edf3;">n</span><span data-highlight="punctuation.special" style="color: #e6edf3;">:</span> <span data-highlight="variable" style="color: #e6edf3;">n</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="number" style="color: #79c0ff;">1</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span> <span data-highlight="number" style="color: #79c0ff;">5</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>  <span data-highlight="comment" style="color: #8b949e;"># That same function, applied to 5</span>
</span><span class="line" data-line="146">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; 6</span>
</span><span class="line" data-line="147">
</span><span class="line" data-line="148">  <span data-highlight="comment" style="color: #8b949e;"># There is no syntax for named functions, but they</span>
</span><span class="line" data-line="149">  <span data-highlight="comment" style="color: #8b949e;"># can be bound by `let` blocks like any other value.</span>
</span><span class="line" data-line="150">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="keyword" style="color: #ff7b72;">let</span> succ <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable.parameter" style="color: #e6edf3;">n</span><span data-highlight="punctuation.special" style="color: #e6edf3;">:</span> <span data-highlight="variable" style="color: #e6edf3;">n</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="number" style="color: #79c0ff;">1</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="keyword" style="color: #ff7b72;">in</span> <span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="function.call" style="color: #d2a8ff;">succ</span></span> <span data-highlight="number" style="color: #79c0ff;">5</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="151">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; 6</span>
</span><span class="line" data-line="152">
</span><span class="line" data-line="153">  <span data-highlight="comment" style="color: #8b949e;"># A function has exactly one argument.</span>
</span><span class="line" data-line="154">  <span data-highlight="comment" style="color: #8b949e;"># Multiple arguments can be achieved with currying.</span>
</span><span class="line" data-line="155">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable.parameter" style="color: #e6edf3;">x</span><span data-highlight="punctuation.special" style="color: #e6edf3;">:</span> <span data-highlight="variable.parameter" style="color: #e6edf3;">y</span><span data-highlight="punctuation.special" style="color: #e6edf3;">:</span> <span data-highlight="variable" style="color: #e6edf3;">x</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">-</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="variable" style="color: #e6edf3;">y</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">a</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">b</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="156">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; &quot;a-b&quot;</span>
</span><span class="line" data-line="157">
</span><span class="line" data-line="158">  <span data-highlight="comment" style="color: #8b949e;"># We can also have named function arguments,</span>
</span><span class="line" data-line="159">  <span data-highlight="comment" style="color: #8b949e;"># which we&#39;ll get to later after we introduce sets.</span>
</span><span class="line" data-line="160">
</span><span class="line" data-line="161">
</span><span class="line" data-line="162">  <span data-highlight="comment" style="color: #8b949e;">#  Lists</span>
</span><span class="line" data-line="163">  <span data-highlight="comment" style="color: #8b949e;">#=========================================</span>
</span><span class="line" data-line="164">
</span><span class="line" data-line="165">  <span data-highlight="comment" style="color: #8b949e;"># Lists are denoted by square brackets.</span>
</span><span class="line" data-line="166">
</span><span class="line" data-line="167">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="function.builtin" style="color: #d2a8ff;">length</span></span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">[</span><span data-highlight="number" style="color: #79c0ff;">1</span> <span data-highlight="number" style="color: #79c0ff;">2</span> <span data-highlight="number" style="color: #79c0ff;">3</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">x</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">]</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="168">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; 4</span>
</span><span class="line" data-line="169">
</span><span class="line" data-line="170">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">[</span><span data-highlight="number" style="color: #79c0ff;">1</span> <span data-highlight="number" style="color: #79c0ff;">2</span> <span data-highlight="number" style="color: #79c0ff;">3</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">]</span> <span data-highlight="operator" style="color: #79c0ff;">++</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">[</span><span data-highlight="number" style="color: #79c0ff;">4</span> <span data-highlight="number" style="color: #79c0ff;">5</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">]</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="171">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; [1 2 3 4 5]</span>
</span><span class="line" data-line="172">
</span><span class="line" data-line="173">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="function.builtin" style="color: #d2a8ff;">concatLists</span></span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">[</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">[</span><span data-highlight="number" style="color: #79c0ff;">1</span> <span data-highlight="number" style="color: #79c0ff;">2</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">]</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">[</span><span data-highlight="number" style="color: #79c0ff;">3</span> <span data-highlight="number" style="color: #79c0ff;">4</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">]</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">[</span><span data-highlight="number" style="color: #79c0ff;">5</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">]</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">]</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="174">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; [1 2 3 4 5]</span>
</span><span class="line" data-line="175">
</span><span class="line" data-line="176">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="function.builtin" style="color: #d2a8ff;">head</span></span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">[</span><span data-highlight="number" style="color: #79c0ff;">1</span> <span data-highlight="number" style="color: #79c0ff;">2</span> <span data-highlight="number" style="color: #79c0ff;">3</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">]</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="177">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; 1</span>
</span><span class="line" data-line="178">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="function.builtin" style="color: #d2a8ff;">tail</span></span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">[</span><span data-highlight="number" style="color: #79c0ff;">1</span> <span data-highlight="number" style="color: #79c0ff;">2</span> <span data-highlight="number" style="color: #79c0ff;">3</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">]</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="179">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; [2 3]</span>
</span><span class="line" data-line="180">
</span><span class="line" data-line="181">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="function.builtin" style="color: #d2a8ff;">elemAt</span></span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">[</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">a</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">b</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">c</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">d</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">]</span> <span data-highlight="number" style="color: #79c0ff;">2</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="182">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; &quot;c&quot;</span>
</span><span class="line" data-line="183">
</span><span class="line" data-line="184">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="function.builtin" style="color: #d2a8ff;">elem</span></span> <span data-highlight="number" style="color: #79c0ff;">2</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">[</span><span data-highlight="number" style="color: #79c0ff;">1</span> <span data-highlight="number" style="color: #79c0ff;">2</span> <span data-highlight="number" style="color: #79c0ff;">3</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">]</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="185">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; true</span>
</span><span class="line" data-line="186">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="function.builtin" style="color: #d2a8ff;">elem</span></span> <span data-highlight="number" style="color: #79c0ff;">5</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">[</span><span data-highlight="number" style="color: #79c0ff;">1</span> <span data-highlight="number" style="color: #79c0ff;">2</span> <span data-highlight="number" style="color: #79c0ff;">3</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">]</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="187">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; false</span>
</span><span class="line" data-line="188">
</span><span class="line" data-line="189">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="function.builtin" style="color: #d2a8ff;">filter</span></span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable.parameter" style="color: #e6edf3;">n</span><span data-highlight="punctuation.special" style="color: #e6edf3;">:</span> <span data-highlight="variable" style="color: #e6edf3;">n</span> <span data-highlight="operator" style="color: #79c0ff;">&lt;</span> <span data-highlight="number" style="color: #79c0ff;">3</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">[</span><span data-highlight="number" style="color: #79c0ff;">1</span> <span data-highlight="number" style="color: #79c0ff;">2</span> <span data-highlight="number" style="color: #79c0ff;">3</span> <span data-highlight="number" style="color: #79c0ff;">4</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">]</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="190">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; [ 1 2 ]</span>
</span><span class="line" data-line="191">
</span><span class="line" data-line="192">
</span><span class="line" data-line="193">  <span data-highlight="comment" style="color: #8b949e;">#  Sets</span>
</span><span class="line" data-line="194">  <span data-highlight="comment" style="color: #8b949e;">#=========================================</span>
</span><span class="line" data-line="195">
</span><span class="line" data-line="196">  <span data-highlight="comment" style="color: #8b949e;"># A &quot;set&quot; is an unordered mapping with string keys.</span>
</span><span class="line" data-line="197">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span> <span data-highlight="variable.member" style="color: #79c0ff;">foo</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">[</span><span data-highlight="number" style="color: #79c0ff;">1</span> <span data-highlight="number" style="color: #79c0ff;">2</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">]</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="variable.member" style="color: #79c0ff;">bar</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">x</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span>
</span><span class="line" data-line="198">
</span><span class="line" data-line="199">  <span data-highlight="comment" style="color: #8b949e;"># The . operator pulls a value out of a set.</span>
</span><span class="line" data-line="200">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span> <span data-highlight="variable.member" style="color: #79c0ff;">a</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">1</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="variable.member" style="color: #79c0ff;">b</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">2</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">.</span><span data-highlight="variable.member" style="color: #79c0ff;">a</span>
</span><span class="line" data-line="201">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; 1</span>
</span><span class="line" data-line="202">
</span><span class="line" data-line="203">  <span data-highlight="comment" style="color: #8b949e;"># The ? operator tests whether a key is present in a set.</span>
</span><span class="line" data-line="204">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span> <span data-highlight="variable.member" style="color: #79c0ff;">a</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">1</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="variable.member" style="color: #79c0ff;">b</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">2</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span> <span data-highlight="operator" style="color: #79c0ff;">?</span> a<span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="205">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; true</span>
</span><span class="line" data-line="206">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span> <span data-highlight="variable.member" style="color: #79c0ff;">a</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">1</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="variable.member" style="color: #79c0ff;">b</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">2</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span> <span data-highlight="operator" style="color: #79c0ff;">?</span> c<span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="207">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; false</span>
</span><span class="line" data-line="208">
</span><span class="line" data-line="209">  <span data-highlight="comment" style="color: #8b949e;"># The // operator merges two sets.</span>
</span><span class="line" data-line="210">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span> <span data-highlight="variable.member" style="color: #79c0ff;">a</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">1</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span> <span data-highlight="operator" style="color: #79c0ff;">//</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span> <span data-highlight="variable.member" style="color: #79c0ff;">b</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">2</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="211">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; &lbrace; a = 1; b = 2; &rbrace;</span>
</span><span class="line" data-line="212">
</span><span class="line" data-line="213">  <span data-highlight="comment" style="color: #8b949e;"># Values on the right override values on the left.</span>
</span><span class="line" data-line="214">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span> <span data-highlight="variable.member" style="color: #79c0ff;">a</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">1</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="variable.member" style="color: #79c0ff;">b</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">2</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span> <span data-highlight="operator" style="color: #79c0ff;">//</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span> <span data-highlight="variable.member" style="color: #79c0ff;">a</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">3</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="variable.member" style="color: #79c0ff;">c</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">4</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="215">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; &lbrace; a = 3; b = 2; c = 4; &rbrace;</span>
</span><span class="line" data-line="216">
</span><span class="line" data-line="217">  <span data-highlight="comment" style="color: #8b949e;"># The rec keyword denotes a &quot;recursive set&quot;,</span>
</span><span class="line" data-line="218">  <span data-highlight="comment" style="color: #8b949e;"># in which attributes can refer to each other.</span>
</span><span class="line" data-line="219">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="keyword" style="color: #ff7b72;">let</span> a <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">1</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="keyword" style="color: #ff7b72;">in</span>     <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span> <span data-highlight="variable.member" style="color: #79c0ff;">a</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">2</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="variable.member" style="color: #79c0ff;">b</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="variable" style="color: #e6edf3;">a</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">.</span><span data-highlight="variable.member" style="color: #79c0ff;">b</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="220">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; 1</span>
</span><span class="line" data-line="221">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="keyword" style="color: #ff7b72;">let</span> a <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">1</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="keyword" style="color: #ff7b72;">in</span> <span data-highlight="keyword" style="color: #ff7b72;">rec</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span> <span data-highlight="variable.member" style="color: #79c0ff;">a</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">2</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="variable.member" style="color: #79c0ff;">b</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="variable" style="color: #e6edf3;">a</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">.</span><span data-highlight="variable.member" style="color: #79c0ff;">b</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="222">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; 2</span>
</span><span class="line" data-line="223">
</span><span class="line" data-line="224">  <span data-highlight="comment" style="color: #8b949e;"># Nested sets can be defined in a piecewise fashion.</span>
</span><span class="line" data-line="225">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span>
</span><span class="line" data-line="226">    <span data-highlight="variable.member" style="color: #79c0ff;">a</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">.</span><span data-highlight="variable.member" style="color: #79c0ff;">b</span>   <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">1</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span>
</span><span class="line" data-line="227">    <span data-highlight="variable.member" style="color: #79c0ff;">a</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">.</span><span data-highlight="variable.member" style="color: #79c0ff;">c</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">.</span><span data-highlight="variable.member" style="color: #79c0ff;">d</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">2</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span>
</span><span class="line" data-line="228">    <span data-highlight="variable.member" style="color: #79c0ff;">a</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">.</span><span data-highlight="variable.member" style="color: #79c0ff;">c</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">.</span><span data-highlight="variable.member" style="color: #79c0ff;">e</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">3</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span>
</span><span class="line" data-line="229">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">.</span>a<span data-highlight="punctuation.delimiter" style="color: #e6edf3;">.</span><span data-highlight="variable.member" style="color: #79c0ff;">c</span>
</span><span class="line" data-line="230">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; &lbrace; d = 2; e = 3; &rbrace;</span>
</span><span class="line" data-line="231">
</span><span class="line" data-line="232">  <span data-highlight="comment" style="color: #8b949e;"># Sets are immutable, so you can&#39;t redefine an attribute:</span>
</span><span class="line" data-line="233">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span>
</span><span class="line" data-line="234">    <span data-highlight="variable.member" style="color: #79c0ff;">a</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span> <span data-highlight="variable.member" style="color: #79c0ff;">b</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">1</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span>
</span><span class="line" data-line="235">    <span data-highlight="variable.member" style="color: #79c0ff;">a</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">.</span><span data-highlight="variable.member" style="color: #79c0ff;">b</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">2</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span>
</span><span class="line" data-line="236">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span>
</span><span class="line" data-line="237">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; attribute &#39;a.b&#39; at (string):3:5 already defined at (string):2:11</span>
</span><span class="line" data-line="238">
</span><span class="line" data-line="239">  <span data-highlight="comment" style="color: #8b949e;"># However, an attribute&#39;s set members can also be defined piecewise</span>
</span><span class="line" data-line="240">  <span data-highlight="comment" style="color: #8b949e;"># way even if the attribute itself has been directly assigned.</span>
</span><span class="line" data-line="241">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span>
</span><span class="line" data-line="242">    <span data-highlight="variable.member" style="color: #79c0ff;">a</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span> <span data-highlight="variable.member" style="color: #79c0ff;">b</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">1</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span>
</span><span class="line" data-line="243">    <span data-highlight="variable.member" style="color: #79c0ff;">a</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">.</span><span data-highlight="variable.member" style="color: #79c0ff;">c</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">2</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span>
</span><span class="line" data-line="244">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span>
</span><span class="line" data-line="245">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; &lbrace; a = &lbrace; b = 1; c = 2; &rbrace;; &rbrace;</span>
</span><span class="line" data-line="246">
</span><span class="line" data-line="247">
</span><span class="line" data-line="248">  <span data-highlight="comment" style="color: #8b949e;">#  With</span>
</span><span class="line" data-line="249">  <span data-highlight="comment" style="color: #8b949e;">#=========================================</span>
</span><span class="line" data-line="250">
</span><span class="line" data-line="251">  <span data-highlight="comment" style="color: #8b949e;"># The body of a `with` block is evaluated with</span>
</span><span class="line" data-line="252">  <span data-highlight="comment" style="color: #8b949e;"># a set&#39;s mappings bound to variables.</span>
</span><span class="line" data-line="253">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="keyword" style="color: #ff7b72;">with</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span> <span data-highlight="variable.member" style="color: #79c0ff;">a</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">1</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="variable.member" style="color: #79c0ff;">b</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">2</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span>
</span><span class="line" data-line="254">    <span data-highlight="variable" style="color: #e6edf3;">a</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="variable" style="color: #e6edf3;">b</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="255">  <span data-highlight="comment" style="color: #8b949e;"># =&gt; 3</span>
</span><span class="line" data-line="256">
</span><span class="line" data-line="257">  <span data-highlight="comment" style="color: #8b949e;"># Inner bindings shadow outer bindings.</span>
</span><span class="line" data-line="258">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="keyword" style="color: #ff7b72;">with</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span> <span data-highlight="variable.member" style="color: #79c0ff;">a</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">1</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="variable.member" style="color: #79c0ff;">b</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">2</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span>
</span><span class="line" data-line="259">    <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="keyword" style="color: #ff7b72;">with</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span> <span data-highlight="variable.member" style="color: #79c0ff;">a</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="number" style="color: #79c0ff;">5</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span>
</span><span class="line" data-line="260">      <span data-highlight="variable" style="color: #e6edf3;">a</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="variable" style="color: #e6edf3;">b</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="261">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; 7</span>
</span><span class="line" data-line="262">
</span><span class="line" data-line="263">  <span data-highlight="comment" style="color: #8b949e;"># This first line of tutorial starts with &quot;with builtins;&quot;</span>
</span><span class="line" data-line="264">  <span data-highlight="comment" style="color: #8b949e;"># because builtins is a set that contains all of the built-in</span>
</span><span class="line" data-line="265">  <span data-highlight="comment" style="color: #8b949e;"># functions (length, head, tail, filter, etc.). This saves</span>
</span><span class="line" data-line="266">  <span data-highlight="comment" style="color: #8b949e;"># us from having to write, for example, &quot;builtins.length&quot;</span>
</span><span class="line" data-line="267">  <span data-highlight="comment" style="color: #8b949e;"># instead of just &quot;length&quot;.</span>
</span><span class="line" data-line="268">
</span><span class="line" data-line="269">
</span><span class="line" data-line="270">  <span data-highlight="comment" style="color: #8b949e;">#  Set patterns</span>
</span><span class="line" data-line="271">  <span data-highlight="comment" style="color: #8b949e;">#=========================================</span>
</span><span class="line" data-line="272">
</span><span class="line" data-line="273">  <span data-highlight="comment" style="color: #8b949e;"># Sets are useful when we need to pass multiple values</span>
</span><span class="line" data-line="274">  <span data-highlight="comment" style="color: #8b949e;"># to a function.</span>
</span><span class="line" data-line="275">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable.parameter" style="color: #e6edf3;">args</span><span data-highlight="punctuation.special" style="color: #e6edf3;">:</span> <span data-highlight="variable" style="color: #e6edf3;">args</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">.</span><span data-highlight="variable.member" style="color: #79c0ff;">x</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">-</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="variable" style="color: #e6edf3;">args</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">.</span><span data-highlight="variable.member" style="color: #79c0ff;">y</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span> <span data-highlight="variable.member" style="color: #79c0ff;">x</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">a</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="variable.member" style="color: #79c0ff;">y</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">b</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span>
</span><span class="line" data-line="276">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; &quot;a-b&quot;</span>
</span><span class="line" data-line="277">
</span><span class="line" data-line="278">  <span data-highlight="comment" style="color: #8b949e;"># This can be written more clearly using set patterns.</span>
</span><span class="line" data-line="279">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span><span data-highlight="variable.parameter" style="color: #e6edf3;">x</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">,</span> <span data-highlight="variable.parameter" style="color: #e6edf3;">y</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">:</span> <span data-highlight="variable" style="color: #e6edf3;">x</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">-</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="variable" style="color: #e6edf3;">y</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span> <span data-highlight="variable.member" style="color: #79c0ff;">x</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">a</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="variable.member" style="color: #79c0ff;">y</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">b</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span>
</span><span class="line" data-line="280">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; &quot;a-b&quot;</span>
</span><span class="line" data-line="281">
</span><span class="line" data-line="282">  <span data-highlight="comment" style="color: #8b949e;"># By default, the pattern fails on sets containing extra keys.</span>
</span><span class="line" data-line="283">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span><span data-highlight="variable.parameter" style="color: #e6edf3;">x</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">,</span> <span data-highlight="variable.parameter" style="color: #e6edf3;">y</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">:</span> <span data-highlight="variable" style="color: #e6edf3;">x</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">-</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="variable" style="color: #e6edf3;">y</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span> <span data-highlight="variable.member" style="color: #79c0ff;">x</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">a</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="variable.member" style="color: #79c0ff;">y</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">b</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="variable.member" style="color: #79c0ff;">z</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">c</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span>
</span><span class="line" data-line="284">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; error: anonymous function called with unexpected argument ‘z’</span>
</span><span class="line" data-line="285">
</span><span class="line" data-line="286">  <span data-highlight="comment" style="color: #8b949e;"># Adding &quot;, ...&quot; allows ignoring extra keys.</span>
</span><span class="line" data-line="287">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span><span data-highlight="variable.parameter" style="color: #e6edf3;">x</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">,</span> <span data-highlight="variable.parameter" style="color: #e6edf3;">y</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">,</span> <span data-highlight="variable.parameter.builtin" style="color: #79c0ff;">...</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">:</span> <span data-highlight="variable" style="color: #e6edf3;">x</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">-</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="variable" style="color: #e6edf3;">y</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span> <span data-highlight="variable.member" style="color: #79c0ff;">x</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">a</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="variable.member" style="color: #79c0ff;">y</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">b</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="variable.member" style="color: #79c0ff;">z</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">c</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span>
</span><span class="line" data-line="288">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; &quot;a-b&quot;</span>
</span><span class="line" data-line="289">
</span><span class="line" data-line="290">  <span data-highlight="comment" style="color: #8b949e;"># The entire set can be bound to a variable using `@`</span>
</span><span class="line" data-line="291">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable.parameter" style="color: #e6edf3;">args</span><span data-highlight="operator" style="color: #79c0ff;">@</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span><span data-highlight="variable.parameter" style="color: #e6edf3;">x</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">,</span> <span data-highlight="variable.parameter" style="color: #e6edf3;">y</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span><span data-highlight="punctuation.special" style="color: #e6edf3;">:</span> <span data-highlight="variable" style="color: #e6edf3;">args</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">.</span><span data-highlight="variable.member" style="color: #79c0ff;">x</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">-</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="variable" style="color: #e6edf3;">args</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">.</span><span data-highlight="variable.member" style="color: #79c0ff;">y</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&lbrace;</span> <span data-highlight="variable.member" style="color: #79c0ff;">x</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">a</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="variable.member" style="color: #79c0ff;">y</span> <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">b</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">&rbrace;</span>
</span><span class="line" data-line="292">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; &quot;a-b&quot;</span>
</span><span class="line" data-line="293">
</span><span class="line" data-line="294">  <span data-highlight="comment" style="color: #8b949e;">#  Errors</span>
</span><span class="line" data-line="295">  <span data-highlight="comment" style="color: #8b949e;">#=========================================</span>
</span><span class="line" data-line="296">
</span><span class="line" data-line="297">  <span data-highlight="comment" style="color: #8b949e;"># `throw` causes evaluation to abort with an error message.</span>
</span><span class="line" data-line="298">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="number" style="color: #79c0ff;">2</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="keyword.exception" style="color: #79c0ff;">throw</span></span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">foo</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="299">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; error: foo</span>
</span><span class="line" data-line="300">
</span><span class="line" data-line="301">  <span data-highlight="comment" style="color: #8b949e;"># `tryEval` catches thrown errors.</span>
</span><span class="line" data-line="302">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="function.builtin" style="color: #d2a8ff;">tryEval</span></span> <span data-highlight="number" style="color: #79c0ff;">42</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="303">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; &lbrace; success = true; value = 42; &rbrace;</span>
</span><span class="line" data-line="304">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="function.builtin" style="color: #d2a8ff;">tryEval</span></span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="number" style="color: #79c0ff;">2</span> <span data-highlight="operator" style="color: #79c0ff;">+</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="keyword.exception" style="color: #79c0ff;">throw</span></span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">foo</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="305">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; &lbrace; success = false; value = false; &rbrace;</span>
</span><span class="line" data-line="306">
</span><span class="line" data-line="307">  <span data-highlight="comment" style="color: #8b949e;"># `abort` is like throw, but it&#39;s fatal; it cannot be caught.</span>
</span><span class="line" data-line="308">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="function.builtin" style="color: #d2a8ff;">tryEval</span></span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="keyword.exception" style="color: #79c0ff;">abort</span></span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">foo</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="309">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; error: evaluation aborted with the following error message: ‘foo’</span>
</span><span class="line" data-line="310">
</span><span class="line" data-line="311">  <span data-highlight="comment" style="color: #8b949e;"># `assert` evaluates to the given value if true;</span>
</span><span class="line" data-line="312">  <span data-highlight="comment" style="color: #8b949e;"># otherwise it throws a catchable exception.</span>
</span><span class="line" data-line="313">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="keyword" style="color: #ff7b72;">assert</span> <span data-highlight="number" style="color: #79c0ff;">1</span> <span data-highlight="operator" style="color: #79c0ff;">&lt;</span> <span data-highlight="number" style="color: #79c0ff;">2</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="number" style="color: #79c0ff;">42</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="314">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; 42</span>
</span><span class="line" data-line="315">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="keyword" style="color: #ff7b72;">assert</span> <span data-highlight="number" style="color: #79c0ff;">1</span> <span data-highlight="operator" style="color: #79c0ff;">&gt;</span> <span data-highlight="number" style="color: #79c0ff;">2</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="number" style="color: #79c0ff;">42</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="316">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; error: assertion failed at (string):1:1</span>
</span><span class="line" data-line="317">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="function.builtin" style="color: #d2a8ff;">tryEval</span></span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="keyword" style="color: #ff7b72;">assert</span> <span data-highlight="number" style="color: #79c0ff;">1</span> <span data-highlight="operator" style="color: #79c0ff;">&gt;</span> <span data-highlight="number" style="color: #79c0ff;">2</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="number" style="color: #79c0ff;">42</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="318">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; &lbrace; success = false; value = false; &rbrace;</span>
</span><span class="line" data-line="319">
</span><span class="line" data-line="320">
</span><span class="line" data-line="321">  <span data-highlight="comment" style="color: #8b949e;">#  Impurity</span>
</span><span class="line" data-line="322">  <span data-highlight="comment" style="color: #8b949e;">#=========================================</span>
</span><span class="line" data-line="323">
</span><span class="line" data-line="324">  <span data-highlight="comment" style="color: #8b949e;"># Because repeatability of builds is critical to the Nix package</span>
</span><span class="line" data-line="325">  <span data-highlight="comment" style="color: #8b949e;"># manager, functional purity is emphasized in the Nix language</span>
</span><span class="line" data-line="326">  <span data-highlight="comment" style="color: #8b949e;"># used to describe Nix packages. But there are a few impurities.</span>
</span><span class="line" data-line="327">
</span><span class="line" data-line="328">  <span data-highlight="comment" style="color: #8b949e;"># You can refer to environment variables.</span>
</span><span class="line" data-line="329">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="function.builtin" style="color: #d2a8ff;">getEnv</span></span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">HOME</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="330">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; &quot;/home/alice&quot;</span>
</span><span class="line" data-line="331">
</span><span class="line" data-line="332">  <span data-highlight="comment" style="color: #8b949e;"># The trace function is used for debugging. It prints the first</span>
</span><span class="line" data-line="333">  <span data-highlight="comment" style="color: #8b949e;"># argument to stderr and evaluates to the second argument.</span>
</span><span class="line" data-line="334">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="function.builtin" style="color: #d2a8ff;">trace</span></span> <span data-highlight="number" style="color: #79c0ff;">1</span> <span data-highlight="number" style="color: #79c0ff;">2</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="335">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; trace: 1</span>
</span><span class="line" data-line="336">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; 2</span>
</span><span class="line" data-line="337">
</span><span class="line" data-line="338">  <span data-highlight="comment" style="color: #8b949e;"># You can write files into the Nix store. Although impure, this is</span>
</span><span class="line" data-line="339">  <span data-highlight="comment" style="color: #8b949e;"># fairly safe because the file name is derived from the hash of</span>
</span><span class="line" data-line="340">  <span data-highlight="comment" style="color: #8b949e;"># its contents. You can read files from anywhere. In this example,</span>
</span><span class="line" data-line="341">  <span data-highlight="comment" style="color: #8b949e;"># we write a file into the store, and then read it back out.</span>
</span><span class="line" data-line="342">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="keyword" style="color: #ff7b72;">let</span> filename <span data-highlight="operator" style="color: #79c0ff;">=</span> <span data-highlight="function.call" style="color: #d2a8ff;"><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="function.builtin" style="color: #d2a8ff;">toFile</span></span></span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">foo.txt</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">hello!</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.delimiter" style="color: #e6edf3;">;</span> <span data-highlight="keyword" style="color: #ff7b72;">in</span>
</span><span class="line" data-line="343">    <span data-highlight="punctuation.bracket" style="color: #e6edf3;">[</span><span data-highlight="variable" style="color: #e6edf3;">filename</span> <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="function.builtin" style="color: #d2a8ff;">readFile</span></span> <span data-highlight="variable" style="color: #e6edf3;">filename</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">]</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="344">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; [ &quot;/nix/store/ayh05aay2anx135prqp0cy34h891247x-foo.txt&quot; &quot;hello!&quot; ]</span>
</span><span class="line" data-line="345">
</span><span class="line" data-line="346">  <span data-highlight="comment" style="color: #8b949e;"># We can also download files into the Nix store.</span>
</span><span class="line" data-line="347">  <span data-highlight="punctuation.bracket" style="color: #e6edf3;">(</span><span data-highlight="variable" style="color: #e6edf3;"><span data-highlight="function.builtin" style="color: #d2a8ff;">fetchurl</span></span> <span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="string" style="color: #a5d6ff;">https://example.com/package-1.2.3.tgz</span><span data-highlight="string" style="color: #a5d6ff;">&quot;</span><span data-highlight="punctuation.bracket" style="color: #e6edf3;">)</span>
</span><span class="line" data-line="348">  <span data-highlight="comment" style="color: #8b949e;">#=&gt; &quot;/nix/store/2drvlh8r57f19s9il42zg89rdr33m2rm-package-1.2.3.tgz&quot;</span>
</span><span class="line" data-line="349">
</span><span class="line" data-line="350"><span data-highlight="punctuation.bracket" style="color: #e6edf3;">]</span>
</span></code></pre>