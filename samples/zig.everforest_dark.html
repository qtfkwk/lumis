<pre class="lumis w-full overflow-auto rounded-lg p-8 font-mono text-sm antialiased leading-6" style="color: #d3c6aa; background-color: #2d353b;"><code class="language-zig" translate="no" tabindex="0"><div class="line" data-line="1"><span data-highlight="comment.documentation" style="color: #859289;">//! Top-level documentation.</span>
</div><div class="line" data-line="2">
</div><div class="line" data-line="3"><span data-highlight="comment" style="color: #859289;">/// Documentation comment.</span>
</div><div class="line" data-line="4">
</div><div class="line" data-line="5"><span data-highlight="comment" style="color: #859289;">// Simple comment.</span>
</div><div class="line" data-line="6">
</div><div class="line" data-line="7"><span data-highlight="comment" style="color: #859289;">// Import standard library, reachable through the &quot;std&quot; constant.</span>
</div><div class="line" data-line="8"><span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="module" style="color: #dbbc7f;">std</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.import" style="color: #e67e80;">@import</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;std&quot;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="9">
</div><div class="line" data-line="10"><span data-highlight="comment" style="color: #859289;">// &quot;info&quot; now refers to the &quot;std.log.info&quot; function.</span>
</div><div class="line" data-line="11"><span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">info</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="variable" style="color: #d3c6aa;">std</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">log</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">info</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="12">
</div><div class="line" data-line="13"><span data-highlight="comment" style="color: #859289;">// Usual hello world.</span>
</div><div class="line" data-line="14"><span data-highlight="comment" style="color: #859289;">// syntax: [pub] fn &lt;function-name&gt;(&lt;arguments&gt;) &lt;return-type&gt; &lbrace; &lt;body&gt; &rbrace;</span>
</div><div class="line" data-line="15"><span data-highlight="keyword.modifier" style="color: #e69875;">pub</span> <span data-highlight="keyword.function" style="color: #e67e80;">fn</span> <span data-highlight="function" style="color: #a7c080;">main</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">void</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="16">    <span data-highlight="comment" style="color: #859289;">// Contrary to C functions, Zig functions have a fixed number of arguments.</span>
</div><div class="line" data-line="17">    <span data-highlight="comment" style="color: #859289;">// In C: &quot;printf&quot; takes any number of arguments.</span>
</div><div class="line" data-line="18">    <span data-highlight="comment" style="color: #859289;">// In Zig: std.log.info takes a format and a list of elements to print.</span>
</div><div class="line" data-line="19">    <span data-highlight="function.call" style="color: #a7c080;">info</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;hello world&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>  <span data-highlight="comment" style="color: #859289;">// .&lbrace;&rbrace; is an empty anonymous tuple.</span>
</div><div class="line" data-line="20"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="21">
</div><div class="line" data-line="22"><span data-highlight="comment" style="color: #859289;">// Booleans.</span>
</div><div class="line" data-line="23"><span data-highlight="comment" style="color: #859289;">// Keywords are preferred to operators for boolean operations.</span>
</div><div class="line" data-line="24"><span data-highlight="function.call" style="color: #a7c080;">print</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;&lbrace;&rbrace;<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&lbrace;&rbrace;<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&lbrace;&rbrace;<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="25">    <span data-highlight="boolean" style="color: #d699b6;">true</span> <span data-highlight="keyword.operator" style="color: #e69875;">and</span> <span data-highlight="boolean" style="color: #d699b6;">false</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="26">    <span data-highlight="boolean" style="color: #d699b6;">true</span> <span data-highlight="keyword.operator" style="color: #e69875;">or</span> <span data-highlight="boolean" style="color: #d699b6;">false</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="27">    <span data-highlight="operator" style="color: #e69875;">!</span><span data-highlight="boolean" style="color: #d699b6;">true</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="28"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="29">
</div><div class="line" data-line="30"><span data-highlight="comment" style="color: #859289;">// Integers.</span>
</div><div class="line" data-line="31"><span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">one_plus_one</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">i32</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">1</span> <span data-highlight="operator" style="color: #e69875;">+</span> <span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="32"><span data-highlight="function.call" style="color: #a7c080;">print</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;1 + 1 = &lbrace;&rbrace;<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="variable" style="color: #d3c6aa;">one_plus_one</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// 2</span>
</div><div class="line" data-line="33">
</div><div class="line" data-line="34"><span data-highlight="comment" style="color: #859289;">// Floats.</span>
</div><div class="line" data-line="35"><span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">seven_div_three</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">f32</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number.float" style="color: #d699b6;">7.0</span> <span data-highlight="operator" style="color: #e69875;">/</span> <span data-highlight="number.float" style="color: #d699b6;">3.0</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="36"><span data-highlight="function.call" style="color: #a7c080;">print</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;7.0 / 3.0 = &lbrace;&rbrace;<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="variable" style="color: #d3c6aa;">seven_div_three</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// 2.33333325e+00</span>
</div><div class="line" data-line="37">
</div><div class="line" data-line="38"><span data-highlight="comment" style="color: #859289;">// Integers have arbitrary value lengths.</span>
</div><div class="line" data-line="39"><span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">myvar</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">u10</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">5</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// 10-bit unsigned integer</span>
</div><div class="line" data-line="40"><span data-highlight="comment" style="color: #859289;">// Useful for example to read network packets, or complex binary formats.</span>
</div><div class="line" data-line="41">
</div><div class="line" data-line="42"><span data-highlight="comment" style="color: #859289;">// Number representation is greatly improved compared to C.</span>
</div><div class="line" data-line="43"><span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">one_billion</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">1_000_000_000</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>         <span data-highlight="comment" style="color: #859289;">// Decimal.</span>
</div><div class="line" data-line="44"><span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">binary_mask</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">0b1_1111_1111</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>         <span data-highlight="comment" style="color: #859289;">// Binary. Ex: network mask.</span>
</div><div class="line" data-line="45"><span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">permissions</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">0o7_5_5</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>               <span data-highlight="comment" style="color: #859289;">// Octal.  Ex: Unix permissions.</span>
</div><div class="line" data-line="46"><span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">big_address</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">0xFF80_0000_0000_0000</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// Hexa.   Ex: IPv6 address.</span>
</div><div class="line" data-line="47">
</div><div class="line" data-line="48">
</div><div class="line" data-line="49"><span data-highlight="comment" style="color: #859289;">// Overflow operators: tell the compiler when it&#39;s okay to overflow.</span>
</div><div class="line" data-line="50"><span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">i</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">u8</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">0</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>  <span data-highlight="comment" style="color: #859289;">// &quot;i&quot; is an unsigned 8-bit integer</span>
</div><div class="line" data-line="51"><span data-highlight="variable" style="color: #d3c6aa;">i</span>  <span data-highlight="operator" style="color: #e69875;">-=</span> <span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>        <span data-highlight="comment" style="color: #859289;">// runtime overflow error (unsigned value always are positive)</span>
</div><div class="line" data-line="52"><span data-highlight="variable" style="color: #d3c6aa;">i</span> <span data-highlight="operator" style="color: #e69875;">-%=</span> <span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>        <span data-highlight="comment" style="color: #859289;">// okay (wrapping operator), i == 255</span>
</div><div class="line" data-line="53">
</div><div class="line" data-line="54"><span data-highlight="comment" style="color: #859289;">// Saturation operators: values will stick to their lower and upper bounds.</span>
</div><div class="line" data-line="55"><span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">i</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">u8</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">200</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>   <span data-highlight="comment" style="color: #859289;">// &quot;i&quot; is an unsigned 8-bit integer (values: from 0 to 255)</span>
</div><div class="line" data-line="56"><span data-highlight="variable" style="color: #d3c6aa;">i</span>  <span data-highlight="operator" style="color: #e69875;">+|</span> <span data-highlight="number" style="color: #d699b6;">100</span> <span data-highlight="operator" style="color: #e69875;">==</span> <span data-highlight="number" style="color: #d699b6;">255</span>   <span data-highlight="comment" style="color: #859289;">// u8: won&#39;t go higher than 255</span>
</div><div class="line" data-line="57">i  <span data-highlight="operator" style="color: #e69875;">-|</span> <span data-highlight="number" style="color: #d699b6;">300</span> <span data-highlight="operator" style="color: #e69875;">==</span> <span data-highlight="number" style="color: #d699b6;">0</span>     <span data-highlight="comment" style="color: #859289;">// unsigned, won&#39;t go lower than 0</span>
</div><div class="line" data-line="58">i  <span data-highlight="operator" style="color: #e69875;">*|</span> <span data-highlight="number" style="color: #d699b6;">2</span>   <span data-highlight="operator" style="color: #e69875;">==</span> <span data-highlight="number" style="color: #d699b6;">255</span>   <span data-highlight="comment" style="color: #859289;">// u8: won&#39;t go higher than 255</span>
</div><div class="line" data-line="59">i <span data-highlight="operator" style="color: #e69875;">&lt;&lt;|</span> <span data-highlight="number" style="color: #d699b6;">8</span>   <span data-highlight="operator" style="color: #e69875;">==</span> <span data-highlight="number" style="color: #d699b6;">255</span>   <span data-highlight="comment" style="color: #859289;">// u8: won&#39;t go higher than 255</span>
</div><div class="line" data-line="60">
</div><div class="line" data-line="61"><span data-highlight="comment" style="color: #859289;">// An array is a well-defined structure with a length attribute (len).</span>
</div><div class="line" data-line="62">
</div><div class="line" data-line="63"><span data-highlight="comment" style="color: #859289;">// 5-byte array with undefined content (stack garbage).</span>
</div><div class="line" data-line="64">var array1<span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="number" style="color: #d699b6;">5</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span>u8 <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="constant.builtin" style="color: #d699b6;">undefined</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="65">
</div><div class="line" data-line="66"><span data-highlight="comment" style="color: #859289;">// 5-byte array with defined content.</span>
</div><div class="line" data-line="67"><span data-highlight="keyword" style="color: #e67e80;">var</span> array2 <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="variable.builtin" style="color: #d699b6;">_</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="type.builtin" style="color: #dbbc7f;">u8</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">2</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">3</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">4</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">5</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="68"><span data-highlight="comment" style="color: #859289;">// [_] means the compiler knows the length at compile-time.</span>
</div><div class="line" data-line="69">
</div><div class="line" data-line="70"><span data-highlight="comment" style="color: #859289;">// 1000-byte array with defined content (0).</span>
</div><div class="line" data-line="71"><span data-highlight="keyword" style="color: #e67e80;">var</span> array3 <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="variable.builtin" style="color: #d699b6;">_</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="type.builtin" style="color: #dbbc7f;">u8</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="number" style="color: #d699b6;">0</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span> <span data-highlight="operator" style="color: #e69875;">**</span> <span data-highlight="number" style="color: #d699b6;">1000</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="72">
</div><div class="line" data-line="73"><span data-highlight="comment" style="color: #859289;">// Another 1000-byte array with defined content.</span>
</div><div class="line" data-line="74"><span data-highlight="comment" style="color: #859289;">// The content is provided by the &quot;foo&quot; function, called at compile-time and</span>
</div><div class="line" data-line="75"><span data-highlight="comment" style="color: #859289;">// allows complex initializations.</span>
</div><div class="line" data-line="76"><span data-highlight="keyword" style="color: #e67e80;">var</span> array4 <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="variable.builtin" style="color: #d699b6;">_</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="type.builtin" style="color: #dbbc7f;">u8</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="function.call" style="color: #a7c080;">foo</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span> <span data-highlight="operator" style="color: #e69875;">**</span> <span data-highlight="number" style="color: #d699b6;">1000</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="77">
</div><div class="line" data-line="78"><span data-highlight="comment" style="color: #859289;">// In any case, array.len gives the length of the array,</span>
</div><div class="line" data-line="79"><span data-highlight="comment" style="color: #859289;">// array1.len and array2.len produce 5, array3.len and array4.len produce 1000.</span>
</div><div class="line" data-line="80">
</div><div class="line" data-line="81">
</div><div class="line" data-line="82"><span data-highlight="comment" style="color: #859289;">// Modifying and accessing arrays content.</span>
</div><div class="line" data-line="83">
</div><div class="line" data-line="84"><span data-highlight="comment" style="color: #859289;">// Array of 10 32-bit undefined integers.</span>
</div><div class="line" data-line="85"><span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">some_integers</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="number" style="color: #d699b6;">10</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="type.builtin" style="color: #dbbc7f;">i32</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="constant.builtin" style="color: #d699b6;">undefined</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="86">
</div><div class="line" data-line="87"><span data-highlight="variable" style="color: #d3c6aa;">some_integers</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="number" style="color: #d699b6;">0</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">30</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// first element of the array is now 30</span>
</div><div class="line" data-line="88">
</div><div class="line" data-line="89"><span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">x</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="variable" style="color: #d3c6aa;">some_integers</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="number" style="color: #d699b6;">0</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// &quot;x&quot; now equals to 30, its type is inferred.</span>
</div><div class="line" data-line="90"><span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">y</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="variable" style="color: #d3c6aa;">some_integers</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// Second element of the array isn&#39;t defined.</span>
</div><div class="line" data-line="91">                          <span data-highlight="comment" style="color: #859289;">// &quot;y&quot; got a stack garbage value (no runtime error).</span>
</div><div class="line" data-line="92">
</div><div class="line" data-line="93"><span data-highlight="comment" style="color: #859289;">// Array of 10 32-bit undefined integers.</span>
</div><div class="line" data-line="94"><span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">some_integers</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="number" style="color: #d699b6;">10</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="type.builtin" style="color: #dbbc7f;">i32</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="constant.builtin" style="color: #d699b6;">undefined</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="95">
</div><div class="line" data-line="96"><span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">z</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="variable" style="color: #d3c6aa;">some_integers</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="number" style="color: #d699b6;">20</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// index &gt; array size, compilation error.</span>
</div><div class="line" data-line="97">
</div><div class="line" data-line="98"><span data-highlight="comment" style="color: #859289;">// At runtime, we loop over the elements of &quot;some_integers&quot; with an index.</span>
</div><div class="line" data-line="99"><span data-highlight="comment" style="color: #859289;">// Index i = 20, then we try:</span>
</div><div class="line" data-line="100"><span data-highlight="keyword.exception" style="color: #e67e80;">try</span> <span data-highlight="variable" style="color: #d3c6aa;">some_integers</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="variable" style="color: #d3c6aa;">i</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// Runtime error &#39;index out of bounds&#39;.</span>
</div><div class="line" data-line="101">                      <span data-highlight="comment" style="color: #859289;">// &quot;try&quot; keyword is necessary when accessing an array with</span>
</div><div class="line" data-line="102">                      <span data-highlight="comment" style="color: #859289;">// an index, since there is a potential runtime error.</span>
</div><div class="line" data-line="103">                      <span data-highlight="comment" style="color: #859289;">// More on that later.</span>
</div><div class="line" data-line="104">
</div><div class="line" data-line="105"><span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">mat4x4</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="number" style="color: #d699b6;">4</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="number" style="color: #d699b6;">4</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="type.builtin" style="color: #dbbc7f;">f32</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="106">    <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="variable.builtin" style="color: #d699b6;">_</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="type.builtin" style="color: #dbbc7f;">f32</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="number.float" style="color: #d699b6;">1.0</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number.float" style="color: #d699b6;">0.0</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number.float" style="color: #d699b6;">0.0</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number.float" style="color: #d699b6;">0.0</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="107">    <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="variable.builtin" style="color: #d699b6;">_</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="type.builtin" style="color: #dbbc7f;">f32</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="number.float" style="color: #d699b6;">0.0</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number.float" style="color: #d699b6;">1.0</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number.float" style="color: #d699b6;">0.0</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number.float" style="color: #d699b6;">1.0</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="108">    <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="variable.builtin" style="color: #d699b6;">_</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="type.builtin" style="color: #dbbc7f;">f32</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="number.float" style="color: #d699b6;">0.0</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number.float" style="color: #d699b6;">0.0</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number.float" style="color: #d699b6;">1.0</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number.float" style="color: #d699b6;">0.0</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="109">    <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="variable.builtin" style="color: #d699b6;">_</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="type.builtin" style="color: #dbbc7f;">f32</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="number.float" style="color: #d699b6;">0.0</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number.float" style="color: #d699b6;">0.0</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number.float" style="color: #d699b6;">0.0</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number.float" style="color: #d699b6;">1.0</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="110"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="111">
</div><div class="line" data-line="112"><span data-highlight="comment" style="color: #859289;">// Access the 2D array then the inner array through indexes.</span>
</div><div class="line" data-line="113"><span data-highlight="keyword.exception" style="color: #e67e80;">try</span> <span data-highlight="function.call" style="color: #a7c080;">expect</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">mat4x4</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span> <span data-highlight="operator" style="color: #e69875;">==</span> <span data-highlight="number.float" style="color: #d699b6;">1.0</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="114">
</div><div class="line" data-line="115"><span data-highlight="comment" style="color: #859289;">// Here we iterate with for loops.</span>
</div><div class="line" data-line="116"><span data-highlight="keyword.repeat" style="color: #e67e80;">for</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">mat4x4</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span><span data-highlight="variable.parameter" style="color: #d3c6aa;">row</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="variable.parameter" style="color: #d3c6aa;">row_index</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="117">    <span data-highlight="keyword.repeat" style="color: #e67e80;">for</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">row</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span><span data-highlight="variable.parameter" style="color: #d3c6aa;">cell</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="variable.parameter" style="color: #d3c6aa;">column_index</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="118">        <span data-highlight="comment" style="color: #859289;">// ...</span>
</div><div class="line" data-line="119">    <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="120"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="121">
</div><div class="line" data-line="122"><span data-highlight="comment" style="color: #859289;">// Simple string constant.</span>
</div><div class="line" data-line="123"><span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">greetings</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="string" style="color: #83c092;">&quot;hello&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="124"><span data-highlight="comment" style="color: #859289;">// ... which is equivalent to:</span>
</div><div class="line" data-line="125"><span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">greetings</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="operator" style="color: #e69875;">*</span><span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="number" style="color: #d699b6;">5</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span><span data-highlight="number" style="color: #d699b6;">0</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="type.builtin" style="color: #dbbc7f;">u8</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="string" style="color: #83c092;">&quot;hello&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="126"><span data-highlight="comment" style="color: #859289;">// In words: &quot;greetings&quot; is a constant value, a pointer on a constant array of 5</span>
</div><div class="line" data-line="127"><span data-highlight="comment" style="color: #859289;">// elements (8-bit unsigned integers), with an extra &#39;0&#39; at the end.</span>
</div><div class="line" data-line="128"><span data-highlight="comment" style="color: #859289;">// The extra &quot;0&quot; is called a &quot;sentinel value&quot;.</span>
</div><div class="line" data-line="129">
</div><div class="line" data-line="130"><span data-highlight="function.call" style="color: #a7c080;">print</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;string: &lbrace;s&rbrace;<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="variable" style="color: #d3c6aa;">greetings</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="131">
</div><div class="line" data-line="132"><span data-highlight="comment" style="color: #859289;">// This represents rather faithfully C strings. Although, Zig strings are</span>
</div><div class="line" data-line="133"><span data-highlight="comment" style="color: #859289;">// structures, no need for &quot;strlen&quot; to compute their size.</span>
</div><div class="line" data-line="134"><span data-highlight="comment" style="color: #859289;">// greetings.len == 5</span>
</div><div class="line" data-line="135">
</div><div class="line" data-line="136"><span data-highlight="comment" style="color: #859289;">// A slice is a pointer and a size, an array without compile-time known size.</span>
</div><div class="line" data-line="137"><span data-highlight="comment" style="color: #859289;">// Slices have runtime out-of-band verifications.</span>
</div><div class="line" data-line="138">
</div><div class="line" data-line="139"><span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">array</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="variable.builtin" style="color: #d699b6;">_</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="type.builtin" style="color: #dbbc7f;">u8</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span><span data-highlight="number" style="color: #d699b6;">2</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span><span data-highlight="number" style="color: #d699b6;">3</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span><span data-highlight="number" style="color: #d699b6;">4</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span><span data-highlight="number" style="color: #d699b6;">5</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>     <span data-highlight="comment" style="color: #859289;">// [_] = array with compile-time known size.</span>
</div><div class="line" data-line="140"><span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">slice</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="variable" style="color: #d3c6aa;">array</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="number" style="color: #d699b6;">0</span><span data-highlight="operator" style="color: #e69875;">..</span><span data-highlight="variable" style="color: #d3c6aa;">array</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">len</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>  <span data-highlight="comment" style="color: #859289;">// &quot;slice&quot; represents the whole array.</span>
</div><div class="line" data-line="141">                                    <span data-highlight="comment" style="color: #859289;">// slice[10] gives a runtime error.</span>
</div><div class="line" data-line="142">
</div><div class="line" data-line="143"><span data-highlight="comment" style="color: #859289;">// Pointer on a value can be created with &quot;&amp;&quot;.</span>
</div><div class="line" data-line="144"><span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">x</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">i32</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="145"><span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">pointer</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="operator" style="color: #e69875;">*</span><span data-highlight="type.builtin" style="color: #dbbc7f;">i32</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="operator" style="color: #e69875;">&amp;</span><span data-highlight="variable" style="color: #d3c6aa;">x</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>  <span data-highlight="comment" style="color: #859289;">// &quot;pointer&quot; is a pointer on the i32 var &quot;x&quot;.</span>
</div><div class="line" data-line="146"><span data-highlight="function.call" style="color: #a7c080;">print</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;1 = &lbrace;&rbrace;, &lbrace;&rbrace;<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="variable" style="color: #d3c6aa;">x</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="variable" style="color: #d3c6aa;">pointer</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="147">
</div><div class="line" data-line="148"><span data-highlight="comment" style="color: #859289;">// Pointer values are accessed and modified with &quot;.*&quot;.</span>
</div><div class="line" data-line="149"><span data-highlight="keyword.conditional" style="color: #e67e80;">if</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">pointer</span><span data-highlight="operator" style="color: #e69875;">.*</span> <span data-highlight="operator" style="color: #e69875;">==</span> <span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="150">    <span data-highlight="function.call" style="color: #a7c080;">print</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;x value == &lbrace;&rbrace;<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="variable" style="color: #d3c6aa;">pointer</span><span data-highlight="operator" style="color: #e69875;">.*</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="151"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="152">
</div><div class="line" data-line="153"><span data-highlight="comment" style="color: #859289;">// &quot;.?&quot; is a shortcut for &quot;orelse unreachable&quot;.</span>
</div><div class="line" data-line="154"><span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">foo</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="variable" style="color: #d3c6aa;">pointer</span><span data-highlight="operator" style="color: #e69875;">.?</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// Get the pointed value, otherwise crash.</span>
</div><div class="line" data-line="155">
</div><div class="line" data-line="156"><span data-highlight="comment" style="color: #859289;">// An optional is a value than can be of any type or null.</span>
</div><div class="line" data-line="157">
</div><div class="line" data-line="158"><span data-highlight="comment" style="color: #859289;">// Example: &quot;optional_value&quot; can either be &quot;null&quot; or an unsigned 32-bit integer.</span>
</div><div class="line" data-line="159"><span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">optional_value</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="operator" style="color: #e69875;">?</span><span data-highlight="type.builtin" style="color: #dbbc7f;">u32</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="constant.builtin" style="color: #d699b6;">null</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// optional_value == null</span>
</div><div class="line" data-line="160"><span data-highlight="variable.member" style="color: #7fbbb3;">optional_value</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">42</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>             <span data-highlight="comment" style="color: #859289;">// optional_value != null</span>
</div><div class="line" data-line="161">
</div><div class="line" data-line="162"><span data-highlight="comment" style="color: #859289;">// &quot;some_function&quot; returns ?u32</span>
</div><div class="line" data-line="163"><span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">x</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="function.call" style="color: #a7c080;">some_function</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="164"><span data-highlight="keyword.conditional" style="color: #e67e80;">if</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">x</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span><span data-highlight="variable.parameter" style="color: #d3c6aa;">value</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="165">    <span data-highlight="comment" style="color: #859289;">// In case &quot;some_function&quot; returned a value.</span>
</div><div class="line" data-line="166">    <span data-highlight="comment" style="color: #859289;">// Do something with &#39;value&#39;.</span>
</div><div class="line" data-line="167"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="168">
</div><div class="line" data-line="169"><span data-highlight="comment" style="color: #859289;">// Zig provides an unified way to express errors.</span>
</div><div class="line" data-line="170">
</div><div class="line" data-line="171"><span data-highlight="comment" style="color: #859289;">// Errors are defined in error enumerations, example:</span>
</div><div class="line" data-line="172"><span data-highlight="keyword" style="color: #e67e80;">const</span> Error <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword" style="color: #e67e80;">error</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="173">    <span data-highlight="type" style="color: #dbbc7f;">WatchingAnyNetflixTVShow</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="174">    <span data-highlight="type" style="color: #dbbc7f;">BeOnTwitter</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="175"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="176">
</div><div class="line" data-line="177"><span data-highlight="comment" style="color: #859289;">// Normal enumerations are expressed the same way, but with &quot;enum&quot; keyword.</span>
</div><div class="line" data-line="178"><span data-highlight="keyword" style="color: #e67e80;">const</span> SuccessStory <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.type" style="color: #e67e80;">enum</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="179">    <span data-highlight="variable.member" style="color: #7fbbb3;">DoingSport</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="180">    <span data-highlight="variable.member" style="color: #7fbbb3;">ReadABook</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="181"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="182">
</div><div class="line" data-line="183">
</div><div class="line" data-line="184"><span data-highlight="comment" style="color: #859289;">// Error union (!).</span>
</div><div class="line" data-line="185"><span data-highlight="comment" style="color: #859289;">// Either the value &quot;mylife&quot; is an an error or a normal value.</span>
</div><div class="line" data-line="186"><span data-highlight="keyword" style="color: #e67e80;">var</span> mylife<span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> Error<span data-highlight="operator" style="color: #e69875;">!</span>SuccessStory <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="type" style="color: #dbbc7f;">Error</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">BeOnTwitter</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="187"><span data-highlight="comment" style="color: #859289;">// mylife is an error. Sad.</span>
</div><div class="line" data-line="188">
</div><div class="line" data-line="189">mylife <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="type" style="color: #dbbc7f;">SuccessStory</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">ReadABook</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="190"><span data-highlight="comment" style="color: #859289;">// Now mylife is an enum.</span>
</div><div class="line" data-line="191">
</div><div class="line" data-line="192">
</div><div class="line" data-line="193"><span data-highlight="comment" style="color: #859289;">// Zig ships with many pre-defined errors. Example:</span>
</div><div class="line" data-line="194"><span data-highlight="keyword" style="color: #e67e80;">const</span> value<span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> anyerror<span data-highlight="operator" style="color: #e69875;">!</span>u32 <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword" style="color: #e67e80;">error</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="type" style="color: #dbbc7f;">Broken</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="195">
</div><div class="line" data-line="196">
</div><div class="line" data-line="197"><span data-highlight="comment" style="color: #859289;">// Handling errors.</span>
</div><div class="line" data-line="198">
</div><div class="line" data-line="199"><span data-highlight="comment" style="color: #859289;">// Some error examples.</span>
</div><div class="line" data-line="200"><span data-highlight="keyword" style="color: #e67e80;">const</span> Error <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword" style="color: #e67e80;">error</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="201">    <span data-highlight="type" style="color: #dbbc7f;">UnExpected</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="202">    <span data-highlight="type" style="color: #dbbc7f;">Authentication</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="203"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="204">
</div><div class="line" data-line="205"><span data-highlight="comment" style="color: #859289;">// &quot;some_function&quot; can either return an &quot;Error&quot; or an integer.</span>
</div><div class="line" data-line="206"><span data-highlight="keyword.function" style="color: #e67e80;">fn</span> some_function<span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> Error<span data-highlight="operator" style="color: #e69875;">!</span><span data-highlight="type.builtin" style="color: #dbbc7f;">u8</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="207">    <span data-highlight="keyword.return" style="color: #e67e80;">return</span> <span data-highlight="type" style="color: #dbbc7f;">Error</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">UnExpected</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// It returns an error.</span>
</div><div class="line" data-line="208"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="209">
</div><div class="line" data-line="210"><span data-highlight="comment" style="color: #859289;">// Errors can be &quot;catch&quot; without intermediate variable.</span>
</div><div class="line" data-line="211">var value <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="function.call" style="color: #a7c080;">some_function</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="keyword.exception" style="color: #e67e80;">catch</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span><span data-highlight="variable.parameter" style="color: #d3c6aa;">err</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span> <span data-highlight="keyword.conditional" style="color: #e67e80;">switch</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">err</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="212">    <span data-highlight="type" style="color: #dbbc7f;">Error</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">UnExpected</span>     <span data-highlight="punctuation.delimiter" style="color: #859289;">=&gt;</span> <span data-highlight="keyword.return" style="color: #e67e80;">return</span> <span data-highlight="variable" style="color: #d3c6aa;">err</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>   <span data-highlight="comment" style="color: #859289;">// Returns the error.</span>
</div><div class="line" data-line="213">    <span data-highlight="type" style="color: #dbbc7f;">Error</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">Authentication</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">=&gt;</span> <span data-highlight="constant.builtin" style="color: #d699b6;">unreachable</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>  <span data-highlight="comment" style="color: #859289;">// Not expected. Crashes the program.</span>
</div><div class="line" data-line="214">    <span data-highlight="keyword.conditional" style="color: #e67e80;">else</span>                 <span data-highlight="punctuation.delimiter" style="color: #859289;">=&gt;</span> <span data-highlight="constant.builtin" style="color: #d699b6;">unreachable</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="215"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="216">
</div><div class="line" data-line="217"><span data-highlight="comment" style="color: #859289;">// An error can be &quot;catch&quot; without giving it a name.</span>
</div><div class="line" data-line="218"><span data-highlight="keyword" style="color: #e67e80;">const</span> unwrapped <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="function.call" style="color: #a7c080;">some_function</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="keyword.exception" style="color: #e67e80;">catch</span> <span data-highlight="number" style="color: #d699b6;">1234</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// &quot;unwrapped&quot; = 1234</span>
</div><div class="line" data-line="219">
</div><div class="line" data-line="220"><span data-highlight="comment" style="color: #859289;">// &quot;try&quot; is a very handy shortcut for &quot;catch |err| return err&quot;.</span>
</div><div class="line" data-line="221"><span data-highlight="keyword" style="color: #e67e80;">var</span> value <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.exception" style="color: #e67e80;">try</span> <span data-highlight="function.call" style="color: #a7c080;">some_function</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="222"><span data-highlight="comment" style="color: #859289;">// If &quot;some_function&quot; fails, the current function stops and returns the error.</span>
</div><div class="line" data-line="223"><span data-highlight="comment" style="color: #859289;">// &quot;value&quot; can only have a valid value, the error already is handled with &quot;try&quot;.</span>
</div><div class="line" data-line="224">
</div><div class="line" data-line="225"><span data-highlight="comment" style="color: #859289;">// Conditional branching.</span>
</div><div class="line" data-line="226">
</div><div class="line" data-line="227"><span data-highlight="keyword.conditional" style="color: #e67e80;">if</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">condition</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="228">    <span data-highlight="variable.builtin" style="color: #d699b6;">...</span>
</div><div class="line" data-line="229"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="230"><span data-highlight="keyword.conditional" style="color: #e67e80;">else</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="231">    <span data-highlight="variable.builtin" style="color: #d699b6;">...</span>
</div><div class="line" data-line="232"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="233">
</div><div class="line" data-line="234"><span data-highlight="comment" style="color: #859289;">// Ternary.</span>
</div><div class="line" data-line="235"><span data-highlight="keyword" style="color: #e67e80;">var</span> value <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.conditional" style="color: #e67e80;">if</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">condition</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="variable" style="color: #d3c6aa;">x</span> <span data-highlight="keyword.conditional" style="color: #e67e80;">else</span> <span data-highlight="variable" style="color: #d3c6aa;">y</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="236">
</div><div class="line" data-line="237"><span data-highlight="comment" style="color: #859289;">// Shortcut for &quot;if (x) x else 0&quot;</span>
</div><div class="line" data-line="238"><span data-highlight="keyword" style="color: #e67e80;">var</span> value <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="variable" style="color: #d3c6aa;">x</span> <span data-highlight="keyword.operator" style="color: #e69875;">orelse</span> <span data-highlight="number" style="color: #d699b6;">0</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="239">
</div><div class="line" data-line="240"><span data-highlight="comment" style="color: #859289;">// If &quot;a&quot; is an optional, which may contain a value.</span>
</div><div class="line" data-line="241"><span data-highlight="keyword.conditional" style="color: #e67e80;">if</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">a</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="operator" style="color: #e69875;">|</span><span data-highlight="variable" style="color: #d3c6aa;">value</span><span data-highlight="operator" style="color: #e69875;">|</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="242">    <span data-highlight="function.call" style="color: #a7c080;">print</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;value: &lbrace;&rbrace;<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="variable" style="color: #d3c6aa;">value</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="243"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="244"><span data-highlight="keyword.conditional" style="color: #e67e80;">else</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="245">    print<span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;&#39;a&#39; is null<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="246"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="247">
</div><div class="line" data-line="248"><span data-highlight="comment" style="color: #859289;">// Get a pointer on the value (if it exists).</span>
</div><div class="line" data-line="249"><span data-highlight="keyword.conditional" style="color: #e67e80;">if</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">a</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="operator" style="color: #e69875;">|</span><span data-highlight="operator" style="color: #e69875;">*</span><span data-highlight="variable" style="color: #d3c6aa;">value</span><span data-highlight="operator" style="color: #e69875;">|</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="variable" style="color: #d3c6aa;">value</span><span data-highlight="operator" style="color: #e69875;">.*</span> <span data-highlight="operator" style="color: #e69875;">+=</span> <span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="250">
</div><div class="line" data-line="251">
</div><div class="line" data-line="252"><span data-highlight="comment" style="color: #859289;">// Loops.</span>
</div><div class="line" data-line="253">
</div><div class="line" data-line="254"><span data-highlight="comment" style="color: #859289;">// Syntax examples:</span>
</div><div class="line" data-line="255"><span data-highlight="comment" style="color: #859289;">//   while (condition) statement</span>
</div><div class="line" data-line="256"><span data-highlight="comment" style="color: #859289;">//   while (condition) : (end-of-iteration-statement) statement</span>
</div><div class="line" data-line="257"><span data-highlight="comment" style="color: #859289;">//</span>
</div><div class="line" data-line="258"><span data-highlight="comment" style="color: #859289;">//   for (iterable) statement</span>
</div><div class="line" data-line="259"><span data-highlight="comment" style="color: #859289;">//   for (iterable) |capture| statement</span>
</div><div class="line" data-line="260"><span data-highlight="comment" style="color: #859289;">//   for (iterable) statement else statement</span>
</div><div class="line" data-line="261">
</div><div class="line" data-line="262"><span data-highlight="comment" style="color: #859289;">// Note: loops work the same way over arrays or slices.</span>
</div><div class="line" data-line="263">
</div><div class="line" data-line="264"><span data-highlight="comment" style="color: #859289;">// Simple &quot;while&quot; loop.</span>
</div><div class="line" data-line="265"><span data-highlight="keyword.repeat" style="color: #e67e80;">while</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">i</span> <span data-highlight="operator" style="color: #e69875;">&lt;</span> <span data-highlight="number" style="color: #d699b6;">10</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="variable" style="color: #d3c6aa;">i</span> <span data-highlight="operator" style="color: #e69875;">+=</span> <span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="266">
</div><div class="line" data-line="267"><span data-highlight="comment" style="color: #859289;">// While loop with a &quot;continue expression&quot;</span>
</div><div class="line" data-line="268"><span data-highlight="comment" style="color: #859289;">// (expression executed as the last expression of the loop).</span>
</div><div class="line" data-line="269"><span data-highlight="keyword.repeat" style="color: #e67e80;">while</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">i</span> <span data-highlight="operator" style="color: #e69875;">&lt;</span> <span data-highlight="number" style="color: #d699b6;">10</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">i</span> <span data-highlight="operator" style="color: #e69875;">+=</span> <span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="variable.builtin" style="color: #d699b6;">...</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="270"><span data-highlight="comment" style="color: #859289;">// Same, with a more complex continue expression (block of code).</span>
</div><div class="line" data-line="271"><span data-highlight="keyword.repeat" style="color: #e67e80;">while</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">i</span> <span data-highlight="operator" style="color: #e69875;">*</span> <span data-highlight="variable" style="color: #d3c6aa;">j</span> <span data-highlight="operator" style="color: #e69875;">&lt;</span> <span data-highlight="number" style="color: #d699b6;">2000</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="variable" style="color: #d3c6aa;">i</span> <span data-highlight="operator" style="color: #e69875;">*=</span> <span data-highlight="number" style="color: #d699b6;">2</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="variable" style="color: #d3c6aa;">j</span> <span data-highlight="operator" style="color: #e69875;">*=</span> <span data-highlight="number" style="color: #d699b6;">3</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="variable.builtin" style="color: #d699b6;">...</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="272">
</div><div class="line" data-line="273"><span data-highlight="comment" style="color: #859289;">// To iterate over a portion of a slice, reslice.</span>
</div><div class="line" data-line="274"><span data-highlight="keyword.repeat" style="color: #e67e80;">for</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">items</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="number" style="color: #d699b6;">0</span><span data-highlight="operator" style="color: #e69875;">..</span><span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="operator" style="color: #e69875;">|</span><span data-highlight="variable" style="color: #d3c6aa;">value</span><span data-highlight="operator" style="color: #e69875;">|</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="variable" style="color: #d3c6aa;">sum</span> <span data-highlight="operator" style="color: #e69875;">+=</span> <span data-highlight="variable" style="color: #d3c6aa;">value</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="275">
</div><div class="line" data-line="276"><span data-highlight="comment" style="color: #859289;">// Loop over every item of an array (or slice).</span>
</div><div class="line" data-line="277"><span data-highlight="keyword.repeat" style="color: #e67e80;">for</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">items</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="operator" style="color: #e69875;">|</span><span data-highlight="variable" style="color: #d3c6aa;">value</span><span data-highlight="operator" style="color: #e69875;">|</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="variable" style="color: #d3c6aa;">sum</span> <span data-highlight="operator" style="color: #e69875;">+=</span> <span data-highlight="variable" style="color: #d3c6aa;">value</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="278">
</div><div class="line" data-line="279"><span data-highlight="comment" style="color: #859289;">// Iterate and get pointers on values instead of copies.</span>
</div><div class="line" data-line="280"><span data-highlight="keyword.repeat" style="color: #e67e80;">for</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">items</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="operator" style="color: #e69875;">|</span><span data-highlight="operator" style="color: #e69875;">*</span><span data-highlight="variable" style="color: #d3c6aa;">value</span><span data-highlight="operator" style="color: #e69875;">|</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="variable" style="color: #d3c6aa;">value</span><span data-highlight="operator" style="color: #e69875;">.*</span> <span data-highlight="operator" style="color: #e69875;">+=</span> <span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="281">
</div><div class="line" data-line="282"><span data-highlight="comment" style="color: #859289;">// Iterate with an index.</span>
</div><div class="line" data-line="283"><span data-highlight="keyword.repeat" style="color: #e67e80;">for</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">items</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span><span data-highlight="variable.parameter" style="color: #d3c6aa;">value</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="variable.parameter" style="color: #d3c6aa;">i</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="function.call" style="color: #a7c080;">print</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;val[&lbrace;&rbrace;] = &lbrace;&rbrace;<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="variable" style="color: #d3c6aa;">i</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="variable" style="color: #d3c6aa;">value</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="284">
</div><div class="line" data-line="285"><span data-highlight="comment" style="color: #859289;">// Iterate with pointer and index.</span>
</div><div class="line" data-line="286"><span data-highlight="keyword.repeat" style="color: #e67e80;">for</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">items</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span><span data-highlight="operator" style="color: #e69875;">*</span><span data-highlight="variable.parameter" style="color: #d3c6aa;">value</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="variable.parameter" style="color: #d3c6aa;">i</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="function.call" style="color: #a7c080;">print</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;val[&lbrace;&rbrace;] = &lbrace;&rbrace;<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="variable" style="color: #d3c6aa;">i</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="variable" style="color: #d3c6aa;">value</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="variable" style="color: #d3c6aa;">value</span><span data-highlight="operator" style="color: #e69875;">.*</span> <span data-highlight="operator" style="color: #e69875;">+=</span> <span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="287">
</div><div class="line" data-line="288">
</div><div class="line" data-line="289"><span data-highlight="comment" style="color: #859289;">// Break and continue are supported.</span>
</div><div class="line" data-line="290"><span data-highlight="keyword.repeat" style="color: #e67e80;">for</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">items</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="operator" style="color: #e69875;">|</span><span data-highlight="variable" style="color: #d3c6aa;">value</span><span data-highlight="operator" style="color: #e69875;">|</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="291">    <span data-highlight="keyword.conditional" style="color: #e67e80;">if</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">value</span> <span data-highlight="operator" style="color: #e69875;">==</span> <span data-highlight="number" style="color: #d699b6;">0</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span>  <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="keyword.repeat" style="color: #e67e80;">continue</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="292">    <span data-highlight="keyword.conditional" style="color: #e67e80;">if</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">value</span> <span data-highlight="operator" style="color: #e69875;">&gt;=</span> <span data-highlight="number" style="color: #d699b6;">10</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="keyword.repeat" style="color: #e67e80;">break</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>    <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="293">    <span data-highlight="comment" style="color: #859289;">// ...</span>
</div><div class="line" data-line="294"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="295">
</div><div class="line" data-line="296"><span data-highlight="comment" style="color: #859289;">// For loops can also be used as expressions.</span>
</div><div class="line" data-line="297"><span data-highlight="comment" style="color: #859289;">// Similar to while loops, when you break from a for loop,</span>
</div><div class="line" data-line="298"><span data-highlight="comment" style="color: #859289;">// the else branch is not evaluated.</span>
</div><div class="line" data-line="299"><span data-highlight="keyword" style="color: #e67e80;">var</span> sum<span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> i32 <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">0</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="300"><span data-highlight="comment" style="color: #859289;">// The &quot;for&quot; loop has to provide a value, which will be the &quot;else&quot; value.</span>
</div><div class="line" data-line="301"><span data-highlight="keyword" style="color: #e67e80;">const</span> result <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.repeat" style="color: #e67e80;">for</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">items</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span><span data-highlight="variable.parameter" style="color: #d3c6aa;">value</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="302">    <span data-highlight="keyword.conditional" style="color: #e67e80;">if</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">value</span> <span data-highlight="operator" style="color: #e69875;">!=</span> <span data-highlight="constant.builtin" style="color: #d699b6;">null</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="303">        <span data-highlight="variable" style="color: #d3c6aa;">sum</span> <span data-highlight="operator" style="color: #e69875;">+=</span> <span data-highlight="variable" style="color: #d3c6aa;">value</span><span data-highlight="operator" style="color: #e69875;">.?</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// &quot;result&quot; will be the last &quot;sum&quot; value.</span>
</div><div class="line" data-line="304">    <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="305"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span> <span data-highlight="keyword.conditional" style="color: #e67e80;">else</span> <span data-highlight="number" style="color: #d699b6;">0</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>                  <span data-highlight="comment" style="color: #859289;">// Last value.</span>
</div><div class="line" data-line="306">
</div><div class="line" data-line="307"><span data-highlight="comment" style="color: #859289;">// Labels are a way to name an instruction, a location in the code.</span>
</div><div class="line" data-line="308"><span data-highlight="comment" style="color: #859289;">// Labels can be used to &quot;continue&quot; or &quot;break&quot; in a nested loop.</span>
</div><div class="line" data-line="309">outer<span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="keyword.repeat" style="color: #e67e80;">for</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="variable.builtin" style="color: #d699b6;">_</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="type.builtin" style="color: #dbbc7f;">i32</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">2</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">3</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">4</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">5</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">6</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">7</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">8</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="operator" style="color: #e69875;">|</span><span data-highlight="variable.builtin" style="color: #d699b6;">_</span><span data-highlight="operator" style="color: #e69875;">|</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="310">    <span data-highlight="keyword.repeat" style="color: #e67e80;">for</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="variable.builtin" style="color: #d699b6;">_</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="type.builtin" style="color: #dbbc7f;">i32</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">2</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">3</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">4</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">5</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span><span data-highlight="variable.builtin" style="color: #d699b6;">_</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="311">        <span data-highlight="variable" style="color: #d3c6aa;">count</span> <span data-highlight="operator" style="color: #e69875;">+=</span> <span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="312">        <span data-highlight="keyword.repeat" style="color: #e67e80;">continue</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">:</span><span data-highlight="label" style="color: #e69875;">outer</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// &quot;continue&quot; for the first loop.</span>
</div><div class="line" data-line="313">    <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="314"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span> <span data-highlight="comment" style="color: #859289;">// count = 8</span>
</div><div class="line" data-line="315">outer<span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="keyword.repeat" style="color: #e67e80;">for</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="variable.builtin" style="color: #d699b6;">_</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="type.builtin" style="color: #dbbc7f;">i32</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">2</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">3</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">4</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">5</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">6</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">7</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">8</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="operator" style="color: #e69875;">|</span><span data-highlight="variable.builtin" style="color: #d699b6;">_</span><span data-highlight="operator" style="color: #e69875;">|</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="316">    <span data-highlight="keyword.repeat" style="color: #e67e80;">for</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="variable.builtin" style="color: #d699b6;">_</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="type.builtin" style="color: #dbbc7f;">i32</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">2</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">3</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">4</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">5</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span><span data-highlight="variable.builtin" style="color: #d699b6;">_</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="317">        <span data-highlight="variable" style="color: #d3c6aa;">count</span> <span data-highlight="operator" style="color: #e69875;">+=</span> <span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="318">        <span data-highlight="keyword.repeat" style="color: #e67e80;">break</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">:</span><span data-highlight="label" style="color: #e69875;">outer</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// &quot;break&quot; for the first loop.</span>
</div><div class="line" data-line="319">    <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="320"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span> <span data-highlight="comment" style="color: #859289;">// count = 1</span>
</div><div class="line" data-line="321">
</div><div class="line" data-line="322">
</div><div class="line" data-line="323"><span data-highlight="comment" style="color: #859289;">// Labels can also be used to return a value from a block.</span>
</div><div class="line" data-line="324"><span data-highlight="keyword" style="color: #e67e80;">var</span> y<span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> i32 <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">5</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="325"><span data-highlight="keyword" style="color: #e67e80;">const</span> x <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="label" style="color: #e69875;">blk</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="326">    <span data-highlight="variable" style="color: #d3c6aa;">y</span> <span data-highlight="operator" style="color: #e69875;">+=</span> <span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="327">    <span data-highlight="keyword.repeat" style="color: #e67e80;">break</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">:</span><span data-highlight="label" style="color: #e69875;">blk</span> <span data-highlight="variable" style="color: #d3c6aa;">y</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// Now &quot;x&quot; equals 6.</span>
</div><div class="line" data-line="328"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="329"><span data-highlight="comment" style="color: #859289;">// Relevant in cases like &quot;for else&quot; expression (explained in the following).</span>
</div><div class="line" data-line="330">
</div><div class="line" data-line="331"><span data-highlight="comment" style="color: #859289;">// For loops can be used as expressions.</span>
</div><div class="line" data-line="332"><span data-highlight="comment" style="color: #859289;">// When you break from a for loop, the else branch is not evaluated.</span>
</div><div class="line" data-line="333"><span data-highlight="comment" style="color: #859289;">// <span data-highlight="comment.warning" style="color: #2d353b; background-color: #dbbc7f; font-weight: bold;">WARNING</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> counter-intuitive.</span>
</div><div class="line" data-line="334"><span data-highlight="comment" style="color: #859289;">//      The &quot;for&quot; loop will run, then the &quot;else&quot; block will run.</span>
</div><div class="line" data-line="335"><span data-highlight="comment" style="color: #859289;">//      The &quot;else&quot; keyword has to be followed by the value to give to &quot;result&quot;.</span>
</div><div class="line" data-line="336"><span data-highlight="comment" style="color: #859289;">//      See later for another form.</span>
</div><div class="line" data-line="337"><span data-highlight="keyword" style="color: #e67e80;">var</span> sum<span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> u8 <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">0</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="338"><span data-highlight="keyword" style="color: #e67e80;">const</span> result <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.repeat" style="color: #e67e80;">for</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">items</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span><span data-highlight="variable.parameter" style="color: #d3c6aa;">value</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="339">    <span data-highlight="variable" style="color: #d3c6aa;">sum</span> <span data-highlight="operator" style="color: #e69875;">+=</span> <span data-highlight="variable" style="color: #d3c6aa;">value</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="340"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span> <span data-highlight="keyword.conditional" style="color: #e67e80;">else</span> <span data-highlight="number" style="color: #d699b6;">8</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// result = 8</span>
</div><div class="line" data-line="341">
</div><div class="line" data-line="342"><span data-highlight="comment" style="color: #859289;">// In this case, the &quot;else&quot; keyword is followed by a value, too.</span>
</div><div class="line" data-line="343"><span data-highlight="comment" style="color: #859289;">// However, the syntax is different: it is labeled.</span>
</div><div class="line" data-line="344"><span data-highlight="comment" style="color: #859289;">// Instead of a value, there is a label followed by a block of code, which</span>
</div><div class="line" data-line="345"><span data-highlight="comment" style="color: #859289;">// allows to do stuff before returning the value (see the &quot;break&quot; invocation).</span>
</div><div class="line" data-line="346"><span data-highlight="keyword" style="color: #e67e80;">const</span> result <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.repeat" style="color: #e67e80;">for</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">items</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span><span data-highlight="variable.parameter" style="color: #d3c6aa;">value</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="comment" style="color: #859289;">// First: loop.</span>
</div><div class="line" data-line="347">    <span data-highlight="variable" style="color: #d3c6aa;">sum</span> <span data-highlight="operator" style="color: #e69875;">+=</span> <span data-highlight="variable" style="color: #d3c6aa;">value</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="348"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span> <span data-highlight="keyword.conditional" style="color: #e67e80;">else</span> <span data-highlight="label" style="color: #e69875;">blk</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>                        <span data-highlight="comment" style="color: #859289;">// Second: &quot;else&quot; block.</span>
</div><div class="line" data-line="349">    <span data-highlight="variable" style="color: #d3c6aa;">std</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">log</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">info</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;executed AFTER the loop!&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="350">    <span data-highlight="keyword.repeat" style="color: #e67e80;">break</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">:</span><span data-highlight="label" style="color: #e69875;">blk</span> <span data-highlight="variable" style="color: #d3c6aa;">sum</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// The &quot;sum&quot; value will replace the label &quot;blk&quot;.</span>
</div><div class="line" data-line="351"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="352">
</div><div class="line" data-line="353"><span data-highlight="comment" style="color: #859289;">// As a switch in C, but slightly more advanced.</span>
</div><div class="line" data-line="354"><span data-highlight="comment" style="color: #859289;">// Syntax:</span>
</div><div class="line" data-line="355"><span data-highlight="comment" style="color: #859289;">//   switch (value) &lbrace;</span>
</div><div class="line" data-line="356"><span data-highlight="comment" style="color: #859289;">//       pattern =&gt; expression,</span>
</div><div class="line" data-line="357"><span data-highlight="comment" style="color: #859289;">//       pattern =&gt; expression,</span>
</div><div class="line" data-line="358"><span data-highlight="comment" style="color: #859289;">//       else    =&gt; expression</span>
</div><div class="line" data-line="359"><span data-highlight="comment" style="color: #859289;">//   &rbrace;;</span>
</div><div class="line" data-line="360">
</div><div class="line" data-line="361"><span data-highlight="comment" style="color: #859289;">// A switch only checking for simple values.</span>
</div><div class="line" data-line="362"><span data-highlight="keyword" style="color: #e67e80;">var</span> x <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.conditional" style="color: #e67e80;">switch</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">value</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="363">    <span data-highlight="type" style="color: #dbbc7f;">Error</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">UnExpected</span>     <span data-highlight="punctuation.delimiter" style="color: #859289;">=&gt;</span> <span data-highlight="keyword.return" style="color: #e67e80;">return</span> <span data-highlight="variable" style="color: #d3c6aa;">err</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="364">    <span data-highlight="type" style="color: #dbbc7f;">Error</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">Authentication</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">=&gt;</span> <span data-highlight="constant.builtin" style="color: #d699b6;">unreachable</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="365">    <span data-highlight="keyword.conditional" style="color: #e67e80;">else</span>                 <span data-highlight="punctuation.delimiter" style="color: #859289;">=&gt;</span> <span data-highlight="constant.builtin" style="color: #d699b6;">unreachable</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="366"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="367">
</div><div class="line" data-line="368"><span data-highlight="comment" style="color: #859289;">// A slightly more advanced switch, accepting a range of values:</span>
</div><div class="line" data-line="369"><span data-highlight="keyword" style="color: #e67e80;">const</span> foo<span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> i32 <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">0</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="370"><span data-highlight="keyword" style="color: #e67e80;">const</span> bar <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.conditional" style="color: #e67e80;">switch</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">foo</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="371">    <span data-highlight="number" style="color: #d699b6;">0</span>                        <span data-highlight="punctuation.delimiter" style="color: #859289;">=&gt;</span> <span data-highlight="string" style="color: #83c092;">&quot;zero&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="372">    <span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="variable.builtin" style="color: #d699b6;">...</span><span data-highlight="variable" style="color: #d3c6aa;">std</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">math</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">maxInt</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="type.builtin" style="color: #dbbc7f;">i32</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">=&gt;</span> <span data-highlight="string" style="color: #83c092;">&quot;positive&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="373">    <span data-highlight="keyword.conditional" style="color: #e67e80;">else</span>                     <span data-highlight="punctuation.delimiter" style="color: #859289;">=&gt;</span> <span data-highlight="string" style="color: #83c092;">&quot;negative&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="374"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="375">
</div><div class="line" data-line="376"><span data-highlight="comment" style="color: #859289;">// Structure containing a single value.</span>
</div><div class="line" data-line="377"><span data-highlight="keyword" style="color: #e67e80;">const</span> Full <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.type" style="color: #e67e80;">struct</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="378">    <span data-highlight="variable.member" style="color: #7fbbb3;">number</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">u16</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="379"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="380">
</div><div class="line" data-line="381"><span data-highlight="comment" style="color: #859289;">// Packed structure, with guaranteed in-memory layout.</span>
</div><div class="line" data-line="382"><span data-highlight="keyword" style="color: #e67e80;">const</span> Divided <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.modifier" style="color: #e69875;">packed</span> <span data-highlight="keyword.type" style="color: #e67e80;">struct</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="383">    <span data-highlight="variable.member" style="color: #7fbbb3;">half1</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">u8</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="384">    <span data-highlight="variable.member" style="color: #7fbbb3;">quarter3</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">u4</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="385">    <span data-highlight="variable.member" style="color: #7fbbb3;">quarter4</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">u4</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="386"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="387">
</div><div class="line" data-line="388"><span data-highlight="comment" style="color: #859289;">// Point is a constant representing a structure containing two u32, &quot;x&quot; and &quot;y&quot;.</span>
</div><div class="line" data-line="389"><span data-highlight="comment" style="color: #859289;">// &quot;x&quot; has a default value, which wasn&#39;t possible in C.</span>
</div><div class="line" data-line="390"><span data-highlight="keyword" style="color: #e67e80;">const</span> Point <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.type" style="color: #e67e80;">struct</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="391">    <span data-highlight="variable.member" style="color: #7fbbb3;">x</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">u32</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="comment" style="color: #859289;">// default value</span>
</div><div class="line" data-line="392">    <span data-highlight="variable.member" style="color: #7fbbb3;">y</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">u32</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="393"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="394">
</div><div class="line" data-line="395"><span data-highlight="comment" style="color: #859289;">// Variable &quot;p&quot; is a new Point, with x = 1 (default value) and y = 2.</span>
</div><div class="line" data-line="396"><span data-highlight="keyword" style="color: #e67e80;">var</span> p <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="type" style="color: #dbbc7f;">Point</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">y</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">2</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="397">
</div><div class="line" data-line="398"><span data-highlight="comment" style="color: #859289;">// Fields are accessed as usual with the dot notation: variable.field.</span>
</div><div class="line" data-line="399">print<span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;p.x: &lbrace;&rbrace;<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="variable" style="color: #d3c6aa;">p</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">x</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// 1</span>
</div><div class="line" data-line="400">print<span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;p.y: &lbrace;&rbrace;<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="variable" style="color: #d3c6aa;">p</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">y</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// 2</span>
</div><div class="line" data-line="401">
</div><div class="line" data-line="402">
</div><div class="line" data-line="403"><span data-highlight="comment" style="color: #859289;">// A structure can also contain public constants and functions.</span>
</div><div class="line" data-line="404"><span data-highlight="keyword" style="color: #e67e80;">const</span> Point <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.type" style="color: #e67e80;">struct</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="405">    <span data-highlight="keyword.modifier" style="color: #e69875;">pub</span> <span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">some_constant</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">30</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="406">
</div><div class="line" data-line="407">    <span data-highlight="variable.member" style="color: #7fbbb3;">x</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">u32</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="408">    <span data-highlight="variable.member" style="color: #7fbbb3;">y</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">u32</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="409">
</div><div class="line" data-line="410">    <span data-highlight="comment" style="color: #859289;">// This function &quot;init&quot; creates a Point and returns it.</span>
</div><div class="line" data-line="411">    <span data-highlight="keyword.modifier" style="color: #e69875;">pub</span> <span data-highlight="keyword.function" style="color: #e67e80;">fn</span> <span data-highlight="function" style="color: #a7c080;">init</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="type" style="color: #dbbc7f;">Point</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="412">        <span data-highlight="keyword.return" style="color: #e67e80;">return</span> <span data-highlight="type" style="color: #dbbc7f;">Point</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">x</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">0</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">y</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">0</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="413">    <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="414"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="415">
</div><div class="line" data-line="416">
</div><div class="line" data-line="417"><span data-highlight="comment" style="color: #859289;">// How to access a structure public constant.</span>
</div><div class="line" data-line="418"><span data-highlight="comment" style="color: #859289;">// The value isn&#39;t accessed from an &quot;instance&quot; of the structure, but from the</span>
</div><div class="line" data-line="419"><span data-highlight="comment" style="color: #859289;">// constant representing the structure definition (Point).</span>
</div><div class="line" data-line="420"><span data-highlight="function.call" style="color: #a7c080;">print</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;constant: &lbrace;&rbrace;<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="type" style="color: #dbbc7f;">Point</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">some_constant</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="421">
</div><div class="line" data-line="422"><span data-highlight="comment" style="color: #859289;">// Having an &quot;init&quot; function is rather idiomatic in the standard library.</span>
</div><div class="line" data-line="423"><span data-highlight="comment" style="color: #859289;">// More on that later.</span>
</div><div class="line" data-line="424"><span data-highlight="keyword" style="color: #e67e80;">var</span> p <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="type" style="color: #dbbc7f;">Point</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">init</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="425">print<span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;p.x: &lbrace;&rbrace;<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="variable" style="color: #d3c6aa;">p</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">x</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// p.x = 0</span>
</div><div class="line" data-line="426">print<span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;p.y: &lbrace;&rbrace;<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="variable" style="color: #d3c6aa;">p</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">y</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// p.y = 0</span>
</div><div class="line" data-line="427">
</div><div class="line" data-line="428">
</div><div class="line" data-line="429"><span data-highlight="comment" style="color: #859289;">// Structures often have functions to modify their state, similar to</span>
</div><div class="line" data-line="430"><span data-highlight="comment" style="color: #859289;">// object-oriented programming.</span>
</div><div class="line" data-line="431"><span data-highlight="keyword" style="color: #e67e80;">const</span> Point <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.type" style="color: #e67e80;">struct</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="432">    <span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="type" style="color: #dbbc7f;">Self</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="function.builtin" style="color: #a7c080;">@This</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// Refers to its own type (later called &quot;Point&quot;).</span>
</div><div class="line" data-line="433">
</div><div class="line" data-line="434">    <span data-highlight="variable.member" style="color: #7fbbb3;">x</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">u32</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="435">    <span data-highlight="variable.member" style="color: #7fbbb3;">y</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">u32</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="436">
</div><div class="line" data-line="437">    <span data-highlight="comment" style="color: #859289;">// Take a look at the signature. First argument is of type *Self: &quot;self&quot; is</span>
</div><div class="line" data-line="438">    <span data-highlight="comment" style="color: #859289;">// a pointer on the instance of the structure.</span>
</div><div class="line" data-line="439">    <span data-highlight="comment" style="color: #859289;">// This allows the same &quot;dot&quot; notation as in OOP, like &quot;instance.set(x,y)&quot;.</span>
</div><div class="line" data-line="440">    <span data-highlight="comment" style="color: #859289;">// See the following example.</span>
</div><div class="line" data-line="441">    <span data-highlight="keyword.modifier" style="color: #e69875;">pub</span> <span data-highlight="keyword.function" style="color: #e67e80;">fn</span> <span data-highlight="function" style="color: #a7c080;">set</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable.parameter" style="color: #d3c6aa;">self</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="operator" style="color: #e69875;">*</span><span data-highlight="type" style="color: #dbbc7f;">Self</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="variable.parameter" style="color: #d3c6aa;">x</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">u32</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="variable.parameter" style="color: #d3c6aa;">y</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">u32</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">void</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="442">        <span data-highlight="variable" style="color: #d3c6aa;">self</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">x</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="variable" style="color: #d3c6aa;">x</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="443">        <span data-highlight="variable" style="color: #d3c6aa;">self</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">y</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="variable" style="color: #d3c6aa;">y</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="444">    <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="445">
</div><div class="line" data-line="446">    <span data-highlight="comment" style="color: #859289;">// Again, look at the signature. First argument is of type Self (not *Self),</span>
</div><div class="line" data-line="447">    <span data-highlight="comment" style="color: #859289;">// this isn&#39;t a pointer. In this case, &quot;self&quot; refers to the instance of the</span>
</div><div class="line" data-line="448">    <span data-highlight="comment" style="color: #859289;">// structure, but can&#39;t be modified.</span>
</div><div class="line" data-line="449">    <span data-highlight="keyword.modifier" style="color: #e69875;">pub</span> <span data-highlight="keyword.function" style="color: #e67e80;">fn</span> <span data-highlight="function" style="color: #a7c080;">getx</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable.parameter" style="color: #d3c6aa;">self</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type" style="color: #dbbc7f;">Self</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">u32</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="450">        <span data-highlight="keyword.return" style="color: #e67e80;">return</span> <span data-highlight="variable" style="color: #d3c6aa;">self</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">x</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="451">    <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="452">
</div><div class="line" data-line="453">    <span data-highlight="comment" style="color: #859289;">// PS: two previous functions may be somewhat useless.</span>
</div><div class="line" data-line="454">    <span data-highlight="comment" style="color: #859289;">//     Attributes can be changed directly, no need for accessor functions.</span>
</div><div class="line" data-line="455">    <span data-highlight="comment" style="color: #859289;">//     It was just an example.</span>
</div><div class="line" data-line="456"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="457">
</div><div class="line" data-line="458"><span data-highlight="comment" style="color: #859289;">// Let&#39;s use the previous structure.</span>
</div><div class="line" data-line="459"><span data-highlight="keyword" style="color: #e67e80;">var</span> p <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="type" style="color: #dbbc7f;">Point</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">x</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">0</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">y</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">0</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// &quot;p&quot; variable is a Point.</span>
</div><div class="line" data-line="460">
</div><div class="line" data-line="461">p<span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">set</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="number" style="color: #d699b6;">10</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">30</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// x and y attributes of &quot;p&quot; are modified via the &quot;set&quot; function.</span>
</div><div class="line" data-line="462">print<span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;p.x: &lbrace;&rbrace;<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="variable" style="color: #d3c6aa;">p</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">x</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// 10</span>
</div><div class="line" data-line="463">print<span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;p.y: &lbrace;&rbrace;<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="variable" style="color: #d3c6aa;">p</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">y</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// 30</span>
</div><div class="line" data-line="464">
</div><div class="line" data-line="465"><span data-highlight="comment" style="color: #859289;">// In C:</span>
</div><div class="line" data-line="466"><span data-highlight="comment" style="color: #859289;">//   1. We would have written something like: point_set(p, 10, 30).</span>
</div><div class="line" data-line="467"><span data-highlight="comment" style="color: #859289;">//   2. Since all functions are in the same namespace, it would have been</span>
</div><div class="line" data-line="468"><span data-highlight="comment" style="color: #859289;">//      very cumbersome to create functions with different names for different</span>
</div><div class="line" data-line="469"><span data-highlight="comment" style="color: #859289;">//      structures. Many long names, painful to read.</span>
</div><div class="line" data-line="470"><span data-highlight="comment" style="color: #859289;">//</span>
</div><div class="line" data-line="471"><span data-highlight="comment" style="color: #859289;">// In Zig, structures provide namespaces for their own functions.</span>
</div><div class="line" data-line="472"><span data-highlight="comment" style="color: #859289;">// Different structures can have the same names for their functions,</span>
</div><div class="line" data-line="473"><span data-highlight="comment" style="color: #859289;">// which brings clarity.</span>
</div><div class="line" data-line="474">
</div><div class="line" data-line="475"><span data-highlight="comment" style="color: #859289;">// A tuple is a list of elements, possibly of different types.</span>
</div><div class="line" data-line="476">
</div><div class="line" data-line="477"><span data-highlight="keyword" style="color: #e67e80;">const</span> foo <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="string" style="color: #83c092;">&quot;hello&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="boolean" style="color: #d699b6;">true</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">42</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="478"><span data-highlight="comment" style="color: #859289;">// foo.len == 3</span>
</div><div class="line" data-line="479">
</div><div class="line" data-line="480"><span data-highlight="keyword" style="color: #e67e80;">const</span> Type <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.type" style="color: #e67e80;">enum</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="variable.member" style="color: #7fbbb3;">ok</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="variable.member" style="color: #7fbbb3;">not_ok</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="481">
</div><div class="line" data-line="482"><span data-highlight="keyword" style="color: #e67e80;">const</span> CardinalDirections <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.type" style="color: #e67e80;">enum</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="variable.member" style="color: #7fbbb3;">North</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="variable.member" style="color: #7fbbb3;">South</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="variable.member" style="color: #7fbbb3;">East</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="variable.member" style="color: #7fbbb3;">West</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="483"><span data-highlight="keyword" style="color: #e67e80;">const</span> direction<span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> CardinalDirections <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="constant" style="color: #83c092;">North</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="484"><span data-highlight="keyword" style="color: #e67e80;">const</span> x <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.conditional" style="color: #e67e80;">switch</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">direction</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="485">    <span data-highlight="comment" style="color: #859289;">// shorthand for CardinalDirections.North</span>
</div><div class="line" data-line="486">    <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="constant" style="color: #83c092;">North</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">=&gt;</span> <span data-highlight="boolean" style="color: #d699b6;">true</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="487">    <span data-highlight="keyword.conditional" style="color: #e67e80;">else</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">=&gt;</span> <span data-highlight="boolean" style="color: #d699b6;">false</span>
</div><div class="line" data-line="488"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="489">
</div><div class="line" data-line="490"><span data-highlight="comment" style="color: #859289;">// Switch statements need exhaustiveness.</span>
</div><div class="line" data-line="491"><span data-highlight="comment" style="color: #859289;">// <span data-highlight="comment.warning" style="color: #2d353b; background-color: #dbbc7f; font-weight: bold;">WARNING</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> won&#39;t compile. East and West are missing.</span>
</div><div class="line" data-line="492"><span data-highlight="keyword" style="color: #e67e80;">const</span> x <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.conditional" style="color: #e67e80;">switch</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">direction</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="493">    <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="constant" style="color: #83c092;">North</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">=&gt;</span> <span data-highlight="boolean" style="color: #d699b6;">true</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="494">    <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="constant" style="color: #83c092;">South</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">=&gt;</span> <span data-highlight="boolean" style="color: #d699b6;">true</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="495"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="496">
</div><div class="line" data-line="497"><span data-highlight="comment" style="color: #859289;">// This compiles without errors, since it exhaustively lists all possible values</span>
</div><div class="line" data-line="498"><span data-highlight="keyword" style="color: #e67e80;">const</span> x <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.conditional" style="color: #e67e80;">switch</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">direction</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="499">    <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="constant" style="color: #83c092;">North</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">=&gt;</span> <span data-highlight="boolean" style="color: #d699b6;">true</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="500">    <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="constant" style="color: #83c092;">South</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">=&gt;</span> <span data-highlight="boolean" style="color: #d699b6;">true</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="501">    <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="constant" style="color: #83c092;">East</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>          <span data-highlight="comment" style="color: #859289;">// Its value is the same as the following pattern: false.</span>
</div><div class="line" data-line="502">    <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="constant" style="color: #83c092;">West</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">=&gt;</span> <span data-highlight="boolean" style="color: #d699b6;">false</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="503"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="504">
</div><div class="line" data-line="505">
</div><div class="line" data-line="506"><span data-highlight="comment" style="color: #859289;">// Enumerations are like structures: they can have functions.</span>
</div><div class="line" data-line="507">
</div><div class="line" data-line="508"><span data-highlight="keyword" style="color: #e67e80;">const</span> Bar <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.type" style="color: #e67e80;">union</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="509">    <span data-highlight="variable.member" style="color: #7fbbb3;">boolean</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">bool</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="510">    <span data-highlight="variable.member" style="color: #7fbbb3;">int</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">i16</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="511">    <span data-highlight="variable.member" style="color: #7fbbb3;">float</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">f32</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="512"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="513">
</div><div class="line" data-line="514"><span data-highlight="comment" style="color: #859289;">// Both syntaxes are equivalent.</span>
</div><div class="line" data-line="515"><span data-highlight="keyword" style="color: #e67e80;">const</span> foo <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="type" style="color: #dbbc7f;">Bar</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">int</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">42</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="516"><span data-highlight="keyword" style="color: #e67e80;">const</span> foo<span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> Bar <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">int</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">42</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="517">
</div><div class="line" data-line="518"><span data-highlight="comment" style="color: #859289;">// Unions, like enumerations and structures, can have functions.</span>
</div><div class="line" data-line="519">
</div><div class="line" data-line="520"><span data-highlight="comment" style="color: #859289;">// Unions can be declared with an enum tag type, allowing them to be used in</span>
</div><div class="line" data-line="521"><span data-highlight="comment" style="color: #859289;">// switch expressions.</span>
</div><div class="line" data-line="522">
</div><div class="line" data-line="523"><span data-highlight="keyword" style="color: #e67e80;">const</span> MaybeEnum <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.type" style="color: #e67e80;">enum</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="524">    <span data-highlight="variable.member" style="color: #7fbbb3;">success</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="525">    <span data-highlight="variable.member" style="color: #7fbbb3;">failure</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="526"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="527">
</div><div class="line" data-line="528"><span data-highlight="keyword" style="color: #e67e80;">const</span> Maybe <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.type" style="color: #e67e80;">union</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="type" style="color: #dbbc7f;">MaybeEnum</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="529">    <span data-highlight="variable.member" style="color: #7fbbb3;">success</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">u8</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="530">    <span data-highlight="variable.member" style="color: #7fbbb3;">failure</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">u8</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="531"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="532">
</div><div class="line" data-line="533"><span data-highlight="comment" style="color: #859289;">// First value: success!</span>
</div><div class="line" data-line="534"><span data-highlight="keyword" style="color: #e67e80;">const</span> yay <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="type" style="color: #dbbc7f;">Maybe</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">success</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">42</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="535"><span data-highlight="keyword.conditional" style="color: #e67e80;">switch</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">yay</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="536">    <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="constant" style="color: #83c092;">success</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">=&gt;</span> <span data-highlight="operator" style="color: #e69875;">|</span><span data-highlight="variable" style="color: #d3c6aa;">value</span><span data-highlight="operator" style="color: #e69875;">|</span>     <span data-highlight="variable" style="color: #d3c6aa;">std</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">log</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">info</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;success: &lbrace;&rbrace;&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="variable" style="color: #d3c6aa;">value</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="537">    <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="constant" style="color: #83c092;">failure</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">=&gt;</span> <span data-highlight="operator" style="color: #e69875;">|</span><span data-highlight="variable" style="color: #d3c6aa;">err_msg</span><span data-highlight="operator" style="color: #e69875;">|</span>   <span data-highlight="variable" style="color: #d3c6aa;">std</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">log</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">info</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;failure: &lbrace;&rbrace;&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="variable" style="color: #d3c6aa;">err_msg</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="538"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="539">
</div><div class="line" data-line="540"><span data-highlight="comment" style="color: #859289;">// Second value: failure! :(</span><span data-highlight="punctuation.delimiter" style="color: #859289;"></span>
</div><div class="line" data-line="541"><span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">nay</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="type" style="color: #dbbc7f;">Maybe</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">failure</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="string" style="color: #83c092;">&quot;I was too lazy&quot;</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="542"><span data-highlight="keyword.conditional" style="color: #e67e80;">switch</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">nay</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="543">    <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="constant" style="color: #83c092;">success</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">=&gt;</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span><span data-highlight="variable.parameter" style="color: #d3c6aa;">value</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span>     <span data-highlight="variable" style="color: #d3c6aa;">std</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">log</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">info</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;success: &lbrace;&rbrace;&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="variable" style="color: #d3c6aa;">value</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="544">    <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="constant" style="color: #83c092;">failure</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">=&gt;</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span><span data-highlight="variable.parameter" style="color: #d3c6aa;">err_msg</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span>   <span data-highlight="variable" style="color: #d3c6aa;">std</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">log</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">info</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;failure: &lbrace;&rbrace;&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="variable" style="color: #d3c6aa;">err_msg</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="545"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="546">
</div><div class="line" data-line="547"><span data-highlight="comment" style="color: #859289;">// Make sure that an action (single instruction or block of code) is executed</span>
</div><div class="line" data-line="548"><span data-highlight="comment" style="color: #859289;">// before the end of the scope (function, block of code).</span>
</div><div class="line" data-line="549"><span data-highlight="comment" style="color: #859289;">// Even on error, that action will be executed.</span>
</div><div class="line" data-line="550"><span data-highlight="comment" style="color: #859289;">// Useful for memory allocations, and resource management in general.</span><span data-highlight="punctuation.delimiter" style="color: #859289;"></span>
</div><div class="line" data-line="551">
</div><div class="line" data-line="552"><span data-highlight="keyword.modifier" style="color: #e69875;">pub</span> <span data-highlight="keyword.function" style="color: #e67e80;">fn</span> <span data-highlight="function" style="color: #a7c080;">main</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">void</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="553">    <span data-highlight="comment" style="color: #859289;">// Should be executed at the end of the function.</span>
</div><div class="line" data-line="554">    <span data-highlight="keyword" style="color: #e67e80;">defer</span> <span data-highlight="function.call" style="color: #a7c080;">print</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;third!<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="555">
</div><div class="line" data-line="556">    <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="557">        <span data-highlight="comment" style="color: #859289;">// Last element of its scope: will be executed right away.</span>
</div><div class="line" data-line="558">        <span data-highlight="keyword" style="color: #e67e80;">defer</span> <span data-highlight="function.call" style="color: #a7c080;">print</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;first!<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="559">    <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="560">
</div><div class="line" data-line="561">    <span data-highlight="function.call" style="color: #a7c080;">print</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;second!<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="562"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="563">
</div><div class="line" data-line="564"><span data-highlight="keyword.function" style="color: #e67e80;">fn</span> <span data-highlight="function" style="color: #a7c080;">hello_world</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">void</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="565">    <span data-highlight="keyword" style="color: #e67e80;">defer</span> <span data-highlight="function.call" style="color: #a7c080;">print</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;end of function<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// after &quot;hello world!&quot;</span>
</div><div class="line" data-line="566">
</div><div class="line" data-line="567">    <span data-highlight="function.call" style="color: #a7c080;">print</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;hello world!<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="568"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="569">
</div><div class="line" data-line="570"><span data-highlight="comment" style="color: #859289;">// errdefer executes the instruction (or block of code) only on error.</span>
</div><div class="line" data-line="571"><span data-highlight="keyword.function" style="color: #e67e80;">fn</span> <span data-highlight="function" style="color: #a7c080;">second_hello_world</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="operator" style="color: #e69875;">!</span><span data-highlight="type.builtin" style="color: #dbbc7f;">void</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="572">    <span data-highlight="keyword" style="color: #e67e80;">errdefer</span> <span data-highlight="function.call" style="color: #a7c080;">print</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;2. something went wrong!<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// if &quot;foo&quot; fails.</span>
</div><div class="line" data-line="573">    <span data-highlight="keyword" style="color: #e67e80;">defer</span>    <span data-highlight="function.call" style="color: #a7c080;">print</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;1. second hello world<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>    <span data-highlight="comment" style="color: #859289;">// executed after &quot;foo&quot;</span>
</div><div class="line" data-line="574">
</div><div class="line" data-line="575">    <span data-highlight="keyword.exception" style="color: #e67e80;">try</span> <span data-highlight="function.call" style="color: #a7c080;">foo</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="576"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="577"><span data-highlight="comment" style="color: #859289;">// Defer statements can be seen as stacked: first one is executed last.</span>
</div><div class="line" data-line="578">
</div><div class="line" data-line="579"><span data-highlight="comment" style="color: #859289;">// &quot;!void&quot; means the function doesn&#39;t return any value except for errors.</span>
</div><div class="line" data-line="580"><span data-highlight="comment" style="color: #859289;">// In this case we try to allocate memory, and this may fail.</span>
</div><div class="line" data-line="581"><span data-highlight="keyword.function" style="color: #e67e80;">fn</span> <span data-highlight="function" style="color: #a7c080;">foo</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="operator" style="color: #e69875;">!</span><span data-highlight="type.builtin" style="color: #dbbc7f;">void</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="582">    <span data-highlight="comment" style="color: #859289;">// In this example we use a page allocator.</span>
</div><div class="line" data-line="583">    <span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">allocator</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="variable" style="color: #d3c6aa;">std</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">heap</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">page_allocator</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="584">
</div><div class="line" data-line="585">    <span data-highlight="comment" style="color: #859289;">// &quot;list&quot; is an ArrayList of 8-bit unsigned integers.</span>
</div><div class="line" data-line="586">    <span data-highlight="comment" style="color: #859289;">// An ArrayList is a contiguous, growable list of elements in memory.</span>
</div><div class="line" data-line="587">    <span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">list</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.exception" style="color: #e67e80;">try</span> <span data-highlight="function.call" style="color: #a7c080;">ArrayList</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="type.builtin" style="color: #dbbc7f;">u8</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">initAllocated</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">allocator</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="588">    <span data-highlight="keyword" style="color: #e67e80;">defer</span> <span data-highlight="variable" style="color: #d3c6aa;">list</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">deinit</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// Free the memory at the end of the scope. Can&#39;t leak.</span>
</div><div class="line" data-line="589">    <span data-highlight="comment" style="color: #859289;">// &quot;defer&quot; allows to express memory release right after its allocation,</span>
</div><div class="line" data-line="590">    <span data-highlight="comment" style="color: #859289;">// regardless of the complexity of the function (loops, conditions, etc.).</span>
</div><div class="line" data-line="591">
</div><div class="line" data-line="592">    <span data-highlight="variable" style="color: #d3c6aa;">list</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">add</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="number" style="color: #d699b6;">5</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// Some memory is allocated here, with the provided allocator.</span>
</div><div class="line" data-line="593">
</div><div class="line" data-line="594">    <span data-highlight="keyword.repeat" style="color: #e67e80;">for</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">list</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">items</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span><span data-highlight="variable.parameter" style="color: #d3c6aa;">item</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">|</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="595">        <span data-highlight="variable" style="color: #d3c6aa;">std</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">debug</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">print</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;item: &lbrace;&rbrace;<span data-highlight="string.escape" style="color: #a7c080;">\n</span>&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="variable" style="color: #d3c6aa;">item</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="596">    <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="597"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="598">
</div><div class="line" data-line="599"><span data-highlight="keyword.function" style="color: #e67e80;">fn</span> <span data-highlight="function" style="color: #a7c080;">some_memory_allocation_example</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="operator" style="color: #e69875;">!</span><span data-highlight="type.builtin" style="color: #dbbc7f;">void</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="600">    <span data-highlight="comment" style="color: #859289;">// Memory allocation may fail, so we &quot;try&quot; to allocate the memory and</span>
</div><div class="line" data-line="601">    <span data-highlight="comment" style="color: #859289;">// in case there is an error, the current function returns it.</span>
</div><div class="line" data-line="602">    <span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">buf</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.exception" style="color: #e67e80;">try</span> <span data-highlight="variable" style="color: #d3c6aa;">page_allocator</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">alloc</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="type.builtin" style="color: #dbbc7f;">u8</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">10</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="603">    <span data-highlight="comment" style="color: #859289;">// Defer memory release right after the allocation.</span>
</div><div class="line" data-line="604">    <span data-highlight="comment" style="color: #859289;">// Will happen even if an error occurs.</span>
</div><div class="line" data-line="605">    <span data-highlight="keyword" style="color: #e67e80;">defer</span> <span data-highlight="variable" style="color: #d3c6aa;">page_allocator</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">free</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">buf</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="606">
</div><div class="line" data-line="607">    <span data-highlight="comment" style="color: #859289;">// Second allocation.</span>
</div><div class="line" data-line="608">    <span data-highlight="comment" style="color: #859289;">// In case of a failure, the first allocation is correctly released.</span>
</div><div class="line" data-line="609">    <span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">buf2</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.exception" style="color: #e67e80;">try</span> <span data-highlight="variable" style="color: #d3c6aa;">page_allocator</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">alloc</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="type.builtin" style="color: #dbbc7f;">u8</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">10</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="610">    <span data-highlight="keyword" style="color: #e67e80;">defer</span> <span data-highlight="variable" style="color: #d3c6aa;">page_allocator</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">free</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">buf2</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="611">
</div><div class="line" data-line="612">    <span data-highlight="comment" style="color: #859289;">// In case of failure, both previous allocations are correctly deallocated.</span>
</div><div class="line" data-line="613">    <span data-highlight="keyword.exception" style="color: #e67e80;">try</span> <span data-highlight="function.call" style="color: #a7c080;">foo</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="614">    <span data-highlight="keyword.exception" style="color: #e67e80;">try</span> <span data-highlight="function.call" style="color: #a7c080;">bar</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="615">
</div><div class="line" data-line="616">    <span data-highlight="comment" style="color: #859289;">// ...</span>
</div><div class="line" data-line="617"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="618">
</div><div class="line" data-line="619"><span data-highlight="comment" style="color: #859289;">// Allocators: 4 main functions to know</span>
</div><div class="line" data-line="620"><span data-highlight="comment" style="color: #859289;">//   single_value = create (type)</span>
</div><div class="line" data-line="621"><span data-highlight="comment" style="color: #859289;">//   destroy (single_value)</span>
</div><div class="line" data-line="622"><span data-highlight="comment" style="color: #859289;">//   slice = alloc (type, size)</span>
</div><div class="line" data-line="623"><span data-highlight="comment" style="color: #859289;">//   free (slice)</span>
</div><div class="line" data-line="624">
</div><div class="line" data-line="625"><span data-highlight="comment" style="color: #859289;">// Page Allocator</span>
</div><div class="line" data-line="626"><span data-highlight="keyword.function" style="color: #e67e80;">fn</span> <span data-highlight="function" style="color: #a7c080;">page_allocator_fn</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="operator" style="color: #e69875;">!</span><span data-highlight="type.builtin" style="color: #dbbc7f;">void</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="627">    <span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">slice</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.exception" style="color: #e67e80;">try</span> <span data-highlight="variable" style="color: #d3c6aa;">std</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">heap</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">page_allocator</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">alloc</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="type.builtin" style="color: #dbbc7f;">u8</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">3</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="628">    <span data-highlight="keyword" style="color: #e67e80;">defer</span> <span data-highlight="variable" style="color: #d3c6aa;">std</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">heap</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">page_allocator</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">free</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">slice</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="629">
</div><div class="line" data-line="630">    <span data-highlight="comment" style="color: #859289;">// playing_with_a_slice(slice);</span>
</div><div class="line" data-line="631"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="632">
</div><div class="line" data-line="633"><span data-highlight="comment" style="color: #859289;">// GeneralPurposeAllocator</span>
</div><div class="line" data-line="634"><span data-highlight="keyword.function" style="color: #e67e80;">fn</span> <span data-highlight="function" style="color: #a7c080;">general_purpose_allocator_fn</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="operator" style="color: #e69875;">!</span><span data-highlight="type.builtin" style="color: #dbbc7f;">void</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="635">    <span data-highlight="comment" style="color: #859289;">// GeneralPurposeAllocator has to be configured.</span>
</div><div class="line" data-line="636">    <span data-highlight="comment" style="color: #859289;">// In this case, we want to track down memory leaks.</span>
</div><div class="line" data-line="637">    <span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">config</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">safety</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="boolean" style="color: #d699b6;">true</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="638">    <span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">gpa</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="variable" style="color: #d3c6aa;">std</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">heap</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">GeneralPurposeAllocator</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">config</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="639">    <span data-highlight="keyword" style="color: #e67e80;">defer</span> <span data-highlight="variable.builtin" style="color: #d699b6;">_</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="variable" style="color: #d3c6aa;">gpa</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">deinit</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="640">
</div><div class="line" data-line="641">    <span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">allocator</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="variable" style="color: #d3c6aa;">gpa</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">allocator</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="642">
</div><div class="line" data-line="643">    <span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">slice</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.exception" style="color: #e67e80;">try</span> <span data-highlight="variable" style="color: #d3c6aa;">allocator</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">alloc</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="type.builtin" style="color: #dbbc7f;">u8</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">3</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="644">    <span data-highlight="keyword" style="color: #e67e80;">defer</span> <span data-highlight="variable" style="color: #d3c6aa;">allocator</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">free</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">slice</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="645">
</div><div class="line" data-line="646">    <span data-highlight="comment" style="color: #859289;">// playing_with_a_slice(slice);</span>
</div><div class="line" data-line="647"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="648">
</div><div class="line" data-line="649"><span data-highlight="comment" style="color: #859289;">// FixedBufferAllocator</span>
</div><div class="line" data-line="650"><span data-highlight="keyword.function" style="color: #e67e80;">fn</span> <span data-highlight="function" style="color: #a7c080;">fixed_buffer_allocator_fn</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="operator" style="color: #e69875;">!</span><span data-highlight="type.builtin" style="color: #dbbc7f;">void</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="651">    <span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">buffer</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="variable.builtin" style="color: #d699b6;">_</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="type.builtin" style="color: #dbbc7f;">u8</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="number" style="color: #d699b6;">0</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span> <span data-highlight="operator" style="color: #e69875;">**</span> <span data-highlight="number" style="color: #d699b6;">1000</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// array of 1000 u8, all initialized at zero.</span>
</div><div class="line" data-line="652">    <span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">fba</span>  <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="variable" style="color: #d3c6aa;">std</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">heap</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">FixedBufferAllocator</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">init</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">buffer</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="number" style="color: #d699b6;">0</span><span data-highlight="operator" style="color: #e69875;">..</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="653">    <span data-highlight="comment" style="color: #859289;">// Side note: buffer[0..] is a way to create a slice from an array.</span>
</div><div class="line" data-line="654">    <span data-highlight="comment" style="color: #859289;">//            Since the function takes a slice and not an array, this makes</span>
</div><div class="line" data-line="655">    <span data-highlight="comment" style="color: #859289;">//            the type system happy.</span>
</div><div class="line" data-line="656">
</div><div class="line" data-line="657">    <span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">allocator</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="variable" style="color: #d3c6aa;">fba</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">allocator</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="658">
</div><div class="line" data-line="659">    <span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">slice</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.exception" style="color: #e67e80;">try</span> <span data-highlight="variable" style="color: #d3c6aa;">allocator</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">alloc</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="type.builtin" style="color: #dbbc7f;">u8</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">3</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="660">    <span data-highlight="comment" style="color: #859289;">// No need for &quot;free&quot;, memory cannot be freed with a fixed buffer allocator.</span>
</div><div class="line" data-line="661">    <span data-highlight="comment" style="color: #859289;">// defer allocator.free(slice);</span>
</div><div class="line" data-line="662">
</div><div class="line" data-line="663">    <span data-highlight="comment" style="color: #859289;">// playing_with_a_slice(slice);</span>
</div><div class="line" data-line="664"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="665">
</div><div class="line" data-line="666"><span data-highlight="comment" style="color: #859289;">// ArenaAllocator</span>
</div><div class="line" data-line="667"><span data-highlight="keyword.function" style="color: #e67e80;">fn</span> <span data-highlight="function" style="color: #a7c080;">arena_allocator_fn</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="operator" style="color: #e69875;">!</span><span data-highlight="type.builtin" style="color: #dbbc7f;">void</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="668">    <span data-highlight="comment" style="color: #859289;">// Reminder: arena doesn&#39;t allocate memory, it uses an inner allocator.</span>
</div><div class="line" data-line="669">    <span data-highlight="comment" style="color: #859289;">// In this case, we combine the arena allocator with the page allocator.</span>
</div><div class="line" data-line="670">    <span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">arena</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="variable" style="color: #d3c6aa;">std</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">heap</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">arena_allocator</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">init</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">std</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">heap</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">page_allocator</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="671">    <span data-highlight="keyword" style="color: #e67e80;">defer</span> <span data-highlight="variable" style="color: #d3c6aa;">arena</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">deinit</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span> <span data-highlight="comment" style="color: #859289;">// end of function = all allocations are freed.</span>
</div><div class="line" data-line="672">
</div><div class="line" data-line="673">    <span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">allocator</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="variable" style="color: #d3c6aa;">arena</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">allocator</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="674">
</div><div class="line" data-line="675">    <span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">slice</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.exception" style="color: #e67e80;">try</span> <span data-highlight="variable" style="color: #d3c6aa;">allocator</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">alloc</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="type.builtin" style="color: #dbbc7f;">u8</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">3</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="676">    <span data-highlight="comment" style="color: #859289;">// No need for &quot;free&quot;, memory will be freed anyway.</span>
</div><div class="line" data-line="677">
</div><div class="line" data-line="678">    <span data-highlight="comment" style="color: #859289;">// playing_with_a_slice(slice);</span>
</div><div class="line" data-line="679"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="680">
</div><div class="line" data-line="681">
</div><div class="line" data-line="682"><span data-highlight="comment" style="color: #859289;">// Combining the general purpose and arena allocators. Both are very useful,</span>
</div><div class="line" data-line="683"><span data-highlight="comment" style="color: #859289;">// and their combinations should be in everyone&#39;s favorite cookbook.</span>
</div><div class="line" data-line="684"><span data-highlight="keyword.function" style="color: #e67e80;">fn</span> <span data-highlight="function" style="color: #a7c080;">gpa_arena_allocator_fn</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="operator" style="color: #e69875;">!</span><span data-highlight="type.builtin" style="color: #dbbc7f;">void</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="685">    <span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">config</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">safety</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="boolean" style="color: #d699b6;">true</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="686">    <span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">gpa</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="variable" style="color: #d3c6aa;">std</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">heap</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">GeneralPurposeAllocator</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">config</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="687">    <span data-highlight="keyword" style="color: #e67e80;">defer</span> <span data-highlight="variable.builtin" style="color: #d699b6;">_</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="variable" style="color: #d3c6aa;">gpa</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">deinit</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="688">
</div><div class="line" data-line="689">    <span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">gpa_allocator</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="variable" style="color: #d3c6aa;">gpa</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">allocator</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="690">
</div><div class="line" data-line="691">    <span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">arena</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="variable" style="color: #d3c6aa;">arena_allocator</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">init</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">gpa_allocator</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="692">    <span data-highlight="keyword" style="color: #e67e80;">defer</span> <span data-highlight="variable" style="color: #d3c6aa;">arena</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">deinit</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="693">
</div><div class="line" data-line="694">    <span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">allocator</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="variable" style="color: #d3c6aa;">arena</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">allocator</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="695">
</div><div class="line" data-line="696">    <span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">slice</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.exception" style="color: #e67e80;">try</span> <span data-highlight="variable" style="color: #d3c6aa;">allocator</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">alloc</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="type.builtin" style="color: #dbbc7f;">u8</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">3</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="697">    <span data-highlight="keyword" style="color: #e67e80;">defer</span> <span data-highlight="variable" style="color: #d3c6aa;">allocator</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="function.call" style="color: #a7c080;">free</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">slice</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="698">
</div><div class="line" data-line="699">    <span data-highlight="comment" style="color: #859289;">// playing_with_a_slice(slice);</span>
</div><div class="line" data-line="700"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="701">
</div><div class="line" data-line="702"><span data-highlight="comment" style="color: #859289;">// Comptime is a way to avoid the pre-processor.</span>
</div><div class="line" data-line="703"><span data-highlight="comment" style="color: #859289;">// The idea is simple: run code at compilation.</span>
</div><div class="line" data-line="704">
</div><div class="line" data-line="705"><span data-highlight="keyword.modifier" style="color: #e69875;">inline</span> <span data-highlight="keyword.function" style="color: #e67e80;">fn</span> <span data-highlight="function" style="color: #a7c080;">max</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="keyword.modifier" style="color: #e69875;">comptime</span> <span data-highlight="type" style="color: #dbbc7f;">T</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">type</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="variable.parameter" style="color: #d3c6aa;">a</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type" style="color: #dbbc7f;">T</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="variable.parameter" style="color: #d3c6aa;">b</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type" style="color: #dbbc7f;">T</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="type" style="color: #dbbc7f;">T</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="706">    <span data-highlight="keyword.return" style="color: #e67e80;">return</span> <span data-highlight="keyword.conditional" style="color: #e67e80;">if</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">a</span> <span data-highlight="operator" style="color: #e69875;">&gt;</span> <span data-highlight="variable" style="color: #d3c6aa;">b</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="variable" style="color: #d3c6aa;">a</span> <span data-highlight="keyword.conditional" style="color: #e67e80;">else</span> <span data-highlight="variable" style="color: #d3c6aa;">b</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="707"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="708">
</div><div class="line" data-line="709"><span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">res</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="function.call" style="color: #a7c080;">max</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="type.builtin" style="color: #dbbc7f;">u64</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">1</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number" style="color: #d699b6;">2</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="710"><span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">res</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="function.call" style="color: #a7c080;">max</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="type.builtin" style="color: #dbbc7f;">f32</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number.float" style="color: #d699b6;">10.50</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="number.float" style="color: #d699b6;">32.19</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="711">
</div><div class="line" data-line="712">
</div><div class="line" data-line="713"><span data-highlight="comment" style="color: #859289;">// Comptime: creating generic structures.</span>
</div><div class="line" data-line="714">
</div><div class="line" data-line="715"><span data-highlight="keyword.function" style="color: #e67e80;">fn</span> <span data-highlight="function" style="color: #a7c080;">List</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="keyword.modifier" style="color: #e69875;">comptime</span> <span data-highlight="type" style="color: #dbbc7f;">T</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">type</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">type</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="716">    <span data-highlight="keyword.return" style="color: #e67e80;">return</span> <span data-highlight="keyword.type" style="color: #e67e80;">struct</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="717">        <span data-highlight="variable.member" style="color: #7fbbb3;">items</span><span data-highlight="punctuation.delimiter" style="color: #859289;">:</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span><span data-highlight="type" style="color: #dbbc7f;">T</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="718">
</div><div class="line" data-line="719">        <span data-highlight="keyword.function" style="color: #e67e80;">fn</span> <span data-highlight="variable" style="color: #d3c6aa;">init</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span>   <span data-highlight="variable.builtin" style="color: #d699b6;">...</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="variable.builtin" style="color: #d699b6;">...</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="720">        <span data-highlight="keyword.function" style="color: #e67e80;">fn</span> <span data-highlight="variable" style="color: #d3c6aa;">deinit</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="operator" style="color: #e69875;">..</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="variable.builtin" style="color: #d699b6;">...</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="721">        fn do<span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span>     <span data-highlight="operator" style="color: #e69875;">..</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="variable.builtin" style="color: #d699b6;">...</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="722">    <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="723"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="724">
</div><div class="line" data-line="725"><span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="type" style="color: #dbbc7f;">MyList</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="function.call" style="color: #a7c080;">List</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="type.builtin" style="color: #dbbc7f;">u8</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="726">
</div><div class="line" data-line="727">
</div><div class="line" data-line="728"><span data-highlight="comment" style="color: #859289;">// use</span>
</div><div class="line" data-line="729"><span data-highlight="keyword" style="color: #e67e80;">var</span> <span data-highlight="variable" style="color: #d3c6aa;">list</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="type" style="color: #dbbc7f;">MyList</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="730">    <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="constant" style="color: #83c092;">items</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="variable.builtin" style="color: #d699b6;">...</span> <span data-highlight="comment" style="color: #859289;">// memory allocation</span>
</div><div class="line" data-line="731"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="732">
</div><div class="line" data-line="733"><span data-highlight="variable" style="color: #d3c6aa;">list</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">items</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">[</span><span data-highlight="number" style="color: #d699b6;">0</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">]</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="number" style="color: #d699b6;">10</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="734">
</div><div class="line" data-line="735"><span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="type" style="color: #dbbc7f;">available_os</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.type" style="color: #e67e80;">enum</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span> <span data-highlight="variable.member" style="color: #7fbbb3;">OpenBSD</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span> <span data-highlight="variable.member" style="color: #7fbbb3;">Linux</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="736"><span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">myos</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="variable" style="color: #d3c6aa;">available_os</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">OpenBSD</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="737">
</div><div class="line" data-line="738">
</div><div class="line" data-line="739"><span data-highlight="comment" style="color: #859289;">// The following switch is based on a constant value.</span>
</div><div class="line" data-line="740"><span data-highlight="comment" style="color: #859289;">// This means that the only possible outcome is known at compile-time.</span>
</div><div class="line" data-line="741"><span data-highlight="comment" style="color: #859289;">// Thus, there is no need to build the rest of the possibilities.</span>
</div><div class="line" data-line="742"><span data-highlight="comment" style="color: #859289;">// Similar to the &quot;#ifdef&quot; in C, but without requiring a pre-processor.</span>
</div><div class="line" data-line="743"><span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">string</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.conditional" style="color: #e67e80;">switch</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">myos</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="744">   <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="constant" style="color: #83c092;">OpenBSD</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">=&gt;</span> <span data-highlight="string" style="color: #83c092;">&quot;OpenBSD is awesome!&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="745">   <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="constant" style="color: #83c092;">Linux</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">=&gt;</span> <span data-highlight="string" style="color: #83c092;">&quot;Linux rocks!&quot;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="746"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="747">
</div><div class="line" data-line="748"><span data-highlight="comment" style="color: #859289;">// Also works in this case.</span>
</div><div class="line" data-line="749"><span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">myprint</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="keyword.conditional" style="color: #e67e80;">switch</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="variable" style="color: #d3c6aa;">myos</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="750">    <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="constant" style="color: #83c092;">OpenBSD</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">=&gt;</span> <span data-highlight="variable" style="color: #d3c6aa;">std</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">debug</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">print</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="751">    <span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="constant" style="color: #83c092;">Linux</span> <span data-highlight="punctuation.delimiter" style="color: #859289;">=&gt;</span> <span data-highlight="variable" style="color: #d3c6aa;">std</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">log</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">info</span><span data-highlight="punctuation.delimiter" style="color: #859289;">,</span>
</div><div class="line" data-line="752"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="753">
</div><div class="line" data-line="754"><span data-highlight="keyword" style="color: #e67e80;">const</span> std <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="function.builtin" style="color: #a7c080;">@import</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="string" style="color: #83c092;">&quot;std&quot;</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="755"><span data-highlight="keyword" style="color: #e67e80;">const</span> <span data-highlight="variable" style="color: #d3c6aa;">expect</span> <span data-highlight="operator" style="color: #e69875;">=</span> <span data-highlight="variable" style="color: #d3c6aa;">std</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">testing</span><span data-highlight="punctuation.delimiter" style="color: #859289;">.</span><span data-highlight="variable.member" style="color: #7fbbb3;">expect</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="756">
</div><div class="line" data-line="757"><span data-highlight="comment" style="color: #859289;">// Function to test.</span>
</div><div class="line" data-line="758"><span data-highlight="keyword.modifier" style="color: #e69875;">pub</span> <span data-highlight="keyword.function" style="color: #e67e80;">fn</span> <span data-highlight="function" style="color: #a7c080;">some_function</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span> <span data-highlight="type.builtin" style="color: #dbbc7f;">bool</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="759">    <span data-highlight="keyword.return" style="color: #e67e80;">return</span> <span data-highlight="boolean" style="color: #d699b6;">true</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="760"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div><div class="line" data-line="761">
</div><div class="line" data-line="762"><span data-highlight="comment" style="color: #859289;">// This &quot;test&quot; block can be run with &quot;zig test&quot;.</span>
</div><div class="line" data-line="763"><span data-highlight="comment" style="color: #859289;">// It will test the function at compile-time.</span>
</div><div class="line" data-line="764"><span data-highlight="keyword" style="color: #e67e80;">test</span> <span data-highlight="string" style="color: #83c092;">&quot;returns true&quot;</span> <span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&lbrace;</span>
</div><div class="line" data-line="765">    <span data-highlight="function.call" style="color: #a7c080;">expect</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="boolean" style="color: #d699b6;">false</span> <span data-highlight="operator" style="color: #e69875;">==</span> <span data-highlight="function.call" style="color: #a7c080;">some_function</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">(</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">)</span><span data-highlight="punctuation.delimiter" style="color: #859289;">;</span>
</div><div class="line" data-line="766"><span data-highlight="punctuation.bracket" style="color: #d3c6aa;">&rbrace;</span>
</div></code></pre>