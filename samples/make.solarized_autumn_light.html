<pre class="lumis w-full overflow-auto rounded-lg p-8 font-mono text-sm antialiased leading-6" style="color: #657b83; background-color: #fdf6e3;"><code class="language-make" translate="no" tabindex="0"><div class="line" data-line="1"><span data-highlight="comment" style="color: #93a1a1;"># Comments can be written like this.</span>
</div><div class="line" data-line="2">
</div><div class="line" data-line="3"><span data-highlight="comment" style="color: #93a1a1;"># File should be named Makefile and then can be run as `make &lt;target&gt;`.</span>
</div><div class="line" data-line="4"><span data-highlight="comment" style="color: #93a1a1;"># Otherwise we use `make -f &quot;filename&quot; &lt;target&gt;`.</span>
</div><div class="line" data-line="5">
</div><div class="line" data-line="6"><span data-highlight="comment" style="color: #93a1a1;"># Warning - only use TABS to indent in Makefiles, never spaces!</span>
</div><div class="line" data-line="7">
</div><div class="line" data-line="8"><span data-highlight="comment" style="color: #93a1a1;">#-----------------------------------------------------------------------</span>
</div><div class="line" data-line="9"><span data-highlight="comment" style="color: #93a1a1;"># Basics</span>
</div><div class="line" data-line="10"><span data-highlight="comment" style="color: #93a1a1;">#-----------------------------------------------------------------------</span>
</div><div class="line" data-line="11">
</div><div class="line" data-line="12"><span data-highlight="comment" style="color: #93a1a1;"># Rules are of the format</span>
</div><div class="line" data-line="13"><span data-highlight="comment" style="color: #93a1a1;"># target: &lt;prerequisite&gt;</span>
</div><div class="line" data-line="14"><span data-highlight="comment" style="color: #93a1a1;"># where prerequisites are optional.</span>
</div><div class="line" data-line="15">
</div><div class="line" data-line="16"><span data-highlight="comment" style="color: #93a1a1;"># A rule - this rule will only run if file0.txt doesn&#39;t exist.</span>
</div><div class="line" data-line="17"><span data-highlight="function" style="color: #268bd2;">file0.txt</span><span data-highlight="operator" style="color: #859900;">:</span>
</div><div class="line" data-line="18">	<span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="string" style="color: #2aa198;">&quot;foo&quot;</span> <span data-highlight="operator" style="color: #859900;">&gt;</span> <span data-highlight="string.special.path" style="color: #6c71c4;">file0.txt</span>
</div><div class="line" data-line="19">	<span data-highlight="comment" style="color: #93a1a1;"># Even comments in these &#39;recipe&#39; sections get passed to the shell.</span>
</div><div class="line" data-line="20">	<span data-highlight="comment" style="color: #93a1a1;"># Try `make file0.txt` or simply `make` - first rule is the default.</span>
</div><div class="line" data-line="21">
</div><div class="line" data-line="22"><span data-highlight="comment" style="color: #93a1a1;"># This rule will only run if file0.txt is newer than file1.txt.</span>
</div><div class="line" data-line="23"><span data-highlight="function" style="color: #268bd2;">file1.txt</span><span data-highlight="operator" style="color: #859900;">:</span> file0.txt
</div><div class="line" data-line="24">	<span data-highlight="function.call" style="color: #268bd2;">cat</span> <span data-highlight="variable.parameter" style="color: #268bd2;">file0.txt</span> <span data-highlight="operator" style="color: #859900;">&gt;</span> <span data-highlight="string.special.path" style="color: #6c71c4;">file1.txt</span>
</div><div class="line" data-line="25">	<span data-highlight="comment" style="color: #93a1a1;"># use the same quoting rules as in the shell.</span>
</div><div class="line" data-line="26">	<span data-highlight="character.special" style="color: #d33682;">@</span><span data-highlight="function.call" style="color: #268bd2;">cat</span> <span data-highlight="variable.parameter" style="color: #268bd2;">file0.txt</span> <span data-highlight="operator" style="color: #859900;">&gt;&gt;</span> <span data-highlight="string.special.path" style="color: #6c71c4;">file1.txt</span>
</div><div class="line" data-line="27">	<span data-highlight="comment" style="color: #93a1a1;"># @ stops the command from being echoed to stdout.</span>
</div><div class="line" data-line="28">	-<span data-highlight="function.call" style="color: #268bd2;">@echo</span> <span data-highlight="string" style="color: #2aa198;">&#39;hello&#39;</span>
</div><div class="line" data-line="29">	<span data-highlight="comment" style="color: #93a1a1;"># - means that make will keep going in the case of an error.</span>
</div><div class="line" data-line="30">	<span data-highlight="comment" style="color: #93a1a1;"># Try `make file1.txt` on the commandline.</span>
</div><div class="line" data-line="31">
</div><div class="line" data-line="32"><span data-highlight="comment" style="color: #93a1a1;"># A rule can have multiple targets and multiple prerequisites</span>
</div><div class="line" data-line="33"><span data-highlight="function" style="color: #268bd2;">file2.txt</span> <span data-highlight="function" style="color: #268bd2;">file3.txt</span><span data-highlight="operator" style="color: #859900;">:</span> file0.txt file1.txt
</div><div class="line" data-line="34">	<span data-highlight="function.call" style="color: #268bd2;">touch</span> <span data-highlight="variable.parameter" style="color: #268bd2;">file2.txt</span>
</div><div class="line" data-line="35">	<span data-highlight="function.call" style="color: #268bd2;">touch</span> <span data-highlight="variable.parameter" style="color: #268bd2;">file3.txt</span>
</div><div class="line" data-line="36">
</div><div class="line" data-line="37"><span data-highlight="comment" style="color: #93a1a1;"># Make will complain about multiple recipes for the same rule. Empty</span>
</div><div class="line" data-line="38"><span data-highlight="comment" style="color: #93a1a1;"># recipes don&#39;t count though and can be used to add new dependencies.</span>
</div><div class="line" data-line="39">
</div><div class="line" data-line="40"><span data-highlight="comment" style="color: #93a1a1;">#-----------------------------------------------------------------------</span>
</div><div class="line" data-line="41"><span data-highlight="comment" style="color: #93a1a1;"># Phony Targets</span>
</div><div class="line" data-line="42"><span data-highlight="comment" style="color: #93a1a1;">#-----------------------------------------------------------------------</span>
</div><div class="line" data-line="43">
</div><div class="line" data-line="44"><span data-highlight="comment" style="color: #93a1a1;"># A phony target. Any target that isn&#39;t a file.</span>
</div><div class="line" data-line="45"><span data-highlight="comment" style="color: #93a1a1;"># It will never be up to date so make will always try to run it.</span>
</div><div class="line" data-line="46"><span data-highlight="function" style="color: #268bd2;">all</span><span data-highlight="operator" style="color: #859900;">:</span> maker process
</div><div class="line" data-line="47">
</div><div class="line" data-line="48"><span data-highlight="comment" style="color: #93a1a1;"># We can declare things out of order.</span>
</div><div class="line" data-line="49"><span data-highlight="function" style="color: #268bd2;">maker</span><span data-highlight="operator" style="color: #859900;">:</span>
</div><div class="line" data-line="50">	<span data-highlight="function.call" style="color: #268bd2;">touch</span> <span data-highlight="variable.parameter" style="color: #268bd2;">ex0.txt</span> <span data-highlight="variable.parameter" style="color: #268bd2;">ex1.txt</span>
</div><div class="line" data-line="51">
</div><div class="line" data-line="52"><span data-highlight="comment" style="color: #93a1a1;"># Can avoid phony rules breaking when a real file has the same name by</span>
</div><div class="line" data-line="53"><span data-highlight="function" style="color: #268bd2;"><span data-highlight="function.builtin" style="color: #268bd2;">.PHONY</span></span><span data-highlight="operator" style="color: #859900;">:</span> all maker <span data-highlight="function" style="color: #268bd2;">process</span>
</div><div class="line" data-line="54"><span data-highlight="comment" style="color: #93a1a1;"># This is a special target. There are several others.</span>
</div><div class="line" data-line="55">
</div><div class="line" data-line="56"><span data-highlight="comment" style="color: #93a1a1;"># A rule with a dependency on a phony target will always run</span>
</div><div class="line" data-line="57"><span data-highlight="function" style="color: #268bd2;">ex0.txt</span> <span data-highlight="function" style="color: #268bd2;">ex1.txt</span><span data-highlight="operator" style="color: #859900;">:</span> maker
</div><div class="line" data-line="58">
</div><div class="line" data-line="59"><span data-highlight="comment" style="color: #93a1a1;"># Common phony targets are: all make clean install ...</span>
</div><div class="line" data-line="60">
</div><div class="line" data-line="61"><span data-highlight="comment" style="color: #93a1a1;">#-----------------------------------------------------------------------</span>
</div><div class="line" data-line="62"><span data-highlight="comment" style="color: #93a1a1;"># Automatic Variables &amp; Wildcards</span>
</div><div class="line" data-line="63"><span data-highlight="comment" style="color: #93a1a1;">#-----------------------------------------------------------------------</span>
</div><div class="line" data-line="64">
</div><div class="line" data-line="65"><span data-highlight="function" style="color: #268bd2;">process</span><span data-highlight="operator" style="color: #859900;">:</span> file*.txt	<span data-highlight="comment" style="color: #93a1a1;">#using a wildcard to match filenames</span>
</div><div class="line" data-line="66">	<span data-highlight="character.special" style="color: #d33682;">@</span><span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="operator" style="color: #859900;">$</span><span data-highlight="character.special" style="color: #d33682;">^</span>	<span data-highlight="comment" style="color: #93a1a1;"># <span data-highlight="operator" style="color: #859900;">$</span><span data-highlight="character.special" style="color: #d33682;">^</span> is a variable containing the list of prerequisites</span>
</div><div class="line" data-line="67">	<span data-highlight="character.special" style="color: #d33682;">@</span><span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="operator" style="color: #859900;">$</span><span data-highlight="character.special" style="color: #d33682;">@</span>	<span data-highlight="comment" style="color: #93a1a1;"># prints the target name</span>
</div><div class="line" data-line="68">	<span data-highlight="comment" style="color: #93a1a1;">#(for multiple target rules, <span data-highlight="operator" style="color: #859900;">$</span><span data-highlight="character.special" style="color: #d33682;">@</span> is whichever caused the rule to run)</span>
</div><div class="line" data-line="69">	<span data-highlight="character.special" style="color: #d33682;">@</span><span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="operator" style="color: #859900;">$</span><span data-highlight="character.special" style="color: #d33682;">&lt;</span>	<span data-highlight="comment" style="color: #93a1a1;"># the first prerequisite listed</span>
</div><div class="line" data-line="70">	<span data-highlight="character.special" style="color: #d33682;">@</span><span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="operator" style="color: #859900;">$</span><span data-highlight="character.special" style="color: #d33682;">?</span>	<span data-highlight="comment" style="color: #93a1a1;"># only the dependencies that are out of date</span>
</div><div class="line" data-line="71">	<span data-highlight="character.special" style="color: #d33682;">@</span><span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="operator" style="color: #859900;">$</span><span data-highlight="character.special" style="color: #d33682;">+</span>	<span data-highlight="comment" style="color: #93a1a1;"># all dependencies including duplicates (unlike normal)</span>
</div><div class="line" data-line="72">	<span data-highlight="comment" style="color: #93a1a1;">#@echo <span data-highlight="operator" style="color: #859900;">$<span data-highlight="string" style="color: #2aa198;">|</span></span>	# all of the &#39;order only&#39; prerequisites</span>
</div><div class="line" data-line="73">
</div><div class="line" data-line="74"><span data-highlight="comment" style="color: #93a1a1;"># Even if we split up the rule dependency definitions, $^ will find them</span>
</div><div class="line" data-line="75"><span data-highlight="function" style="color: #268bd2;">process</span><span data-highlight="operator" style="color: #859900;">:</span> ex1.txt file0.txt
</div><div class="line" data-line="76"><span data-highlight="comment" style="color: #93a1a1;"># ex1.txt will be found but file0.txt will be deduplicated.</span>
</div><div class="line" data-line="77">
</div><div class="line" data-line="78"><span data-highlight="comment" style="color: #93a1a1;">#-----------------------------------------------------------------------</span>
</div><div class="line" data-line="79"><span data-highlight="comment" style="color: #93a1a1;"># Patterns</span>
</div><div class="line" data-line="80"><span data-highlight="comment" style="color: #93a1a1;">#-----------------------------------------------------------------------</span>
</div><div class="line" data-line="81">
</div><div class="line" data-line="82"><span data-highlight="comment" style="color: #93a1a1;"># Can teach make how to convert certain files into other files.</span>
</div><div class="line" data-line="83">
</div><div class="line" data-line="84"><span data-highlight="function" style="color: #268bd2;">%.png</span><span data-highlight="operator" style="color: #859900;">:</span> %.svg
</div><div class="line" data-line="85">	<span data-highlight="function.call" style="color: #268bd2;">inkscape</span> <span data-highlight="variable.parameter" style="color: #268bd2;">--export-png</span> <span data-highlight="operator" style="color: #859900;">$</span><span data-highlight="character.special" style="color: #d33682;">^</span>
</div><div class="line" data-line="86">
</div><div class="line" data-line="87"><span data-highlight="comment" style="color: #93a1a1;"># Pattern rules will only do anything if make decides to create the</span>
</div><div class="line" data-line="88"><span data-highlight="comment" style="color: #93a1a1;"># target.</span>
</div><div class="line" data-line="89">
</div><div class="line" data-line="90"><span data-highlight="comment" style="color: #93a1a1;"># Directory paths are normally ignored when matching pattern rules. But</span>
</div><div class="line" data-line="91"><span data-highlight="comment" style="color: #93a1a1;"># make will try to use the most appropriate rule available.</span>
</div><div class="line" data-line="92"><span data-highlight="function" style="color: #268bd2;">small/%.png</span><span data-highlight="operator" style="color: #859900;">:</span> %.svg
</div><div class="line" data-line="93">	<span data-highlight="function.call" style="color: #268bd2;">inkscape</span> <span data-highlight="variable.parameter" style="color: #268bd2;">--export-png</span> <span data-highlight="variable.parameter" style="color: #268bd2;">--export-dpi</span> <span data-highlight="number" style="color: #d33682;">30</span> <span data-highlight="operator" style="color: #859900;">$</span><span data-highlight="character.special" style="color: #d33682;">^</span>
</div><div class="line" data-line="94">
</div><div class="line" data-line="95"><span data-highlight="comment" style="color: #93a1a1;"># make will use the last version for a pattern rule that it finds.</span>
</div><div class="line" data-line="96"><span data-highlight="function" style="color: #268bd2;">%.png</span><span data-highlight="operator" style="color: #859900;">:</span> %.svg
</div><div class="line" data-line="97">	<span data-highlight="character.special" style="color: #d33682;">@</span><span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="variable.parameter" style="color: #268bd2;">this</span> <span data-highlight="variable.parameter" style="color: #268bd2;">rule</span> <span data-highlight="variable.parameter" style="color: #268bd2;">is</span> <span data-highlight="variable.parameter" style="color: #268bd2;">chosen</span>
</div><div class="line" data-line="98">
</div><div class="line" data-line="99"><span data-highlight="comment" style="color: #93a1a1;"># However make will use the first pattern rule that can make the target</span>
</div><div class="line" data-line="100"><span data-highlight="function" style="color: #268bd2;">%.png</span><span data-highlight="operator" style="color: #859900;">:</span> %.ps
</div><div class="line" data-line="101">	<span data-highlight="character.special" style="color: #d33682;">@</span><span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="variable.parameter" style="color: #268bd2;">this</span> <span data-highlight="variable.parameter" style="color: #268bd2;">rule</span> <span data-highlight="variable.parameter" style="color: #268bd2;">is</span> <span data-highlight="variable.parameter" style="color: #268bd2;">not</span> <span data-highlight="variable.parameter" style="color: #268bd2;">chosen</span> <span data-highlight="variable.parameter" style="color: #268bd2;">if</span> <span data-highlight="variable.parameter" style="color: #268bd2;">*.svg</span> <span data-highlight="variable.parameter" style="color: #268bd2;">and</span> <span data-highlight="variable.parameter" style="color: #268bd2;">*.ps</span> <span data-highlight="variable.parameter" style="color: #268bd2;">are</span> <span data-highlight="variable.parameter" style="color: #268bd2;">both</span> <span data-highlight="variable.parameter" style="color: #268bd2;">present</span>
</div><div class="line" data-line="102">
</div><div class="line" data-line="103"><span data-highlight="comment" style="color: #93a1a1;"># make already has some pattern rules built-in. For instance, it knows</span>
</div><div class="line" data-line="104"><span data-highlight="comment" style="color: #93a1a1;"># how to turn *.c files into *.o files.</span>
</div><div class="line" data-line="105">
</div><div class="line" data-line="106"><span data-highlight="comment" style="color: #93a1a1;"># Older makefiles might use suffix rules instead of pattern rules</span>
</div><div class="line" data-line="107"><span data-highlight="function" style="color: #268bd2;">.png.ps</span><span data-highlight="operator" style="color: #859900;">:</span>
</div><div class="line" data-line="108">	<span data-highlight="character.special" style="color: #d33682;">@</span><span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="variable.parameter" style="color: #268bd2;">this</span> <span data-highlight="variable.parameter" style="color: #268bd2;">rule</span> <span data-highlight="variable.parameter" style="color: #268bd2;">is</span> <span data-highlight="variable.parameter" style="color: #268bd2;">similar</span> <span data-highlight="variable.parameter" style="color: #268bd2;">to</span> <span data-highlight="variable.parameter" style="color: #268bd2;">a</span> <span data-highlight="variable.parameter" style="color: #268bd2;">pattern</span> <span data-highlight="variable.parameter" style="color: #268bd2;">rule.</span>
</div><div class="line" data-line="109">
</div><div class="line" data-line="110"><span data-highlight="comment" style="color: #93a1a1;"># Tell make about the suffix rule</span>
</div><div class="line" data-line="111"><span data-highlight="function.builtin" style="color: #268bd2;">.SUFFIXES</span><span data-highlight="operator" style="color: #859900;">:</span> .png
</div><div class="line" data-line="112">
</div><div class="line" data-line="113"><span data-highlight="comment" style="color: #93a1a1;">#-----------------------------------------------------------------------</span>
</div><div class="line" data-line="114"><span data-highlight="comment" style="color: #93a1a1;"># Variables</span>
</div><div class="line" data-line="115"><span data-highlight="comment" style="color: #93a1a1;">#-----------------------------------------------------------------------</span>
</div><div class="line" data-line="116"><span data-highlight="comment" style="color: #93a1a1;"># aka. macros</span>
</div><div class="line" data-line="117">
</div><div class="line" data-line="118"><span data-highlight="comment" style="color: #93a1a1;"># Variables are basically all string types</span>
</div><div class="line" data-line="119">
</div><div class="line" data-line="120"><span data-highlight="string.special.symbol" style="color: #657b83;">name</span> <span data-highlight="operator" style="color: #859900;">=</span> Ted
</div><div class="line" data-line="121"><span data-highlight="string.special.symbol" style="color: #657b83;">name2</span><span data-highlight="operator" style="color: #859900;">=</span>&quot;Sarah&quot;
</div><div class="line" data-line="122">
</div><div class="line" data-line="123"><span data-highlight="function" style="color: #268bd2;">echo</span><span data-highlight="operator" style="color: #859900;">:</span>
</div><div class="line" data-line="124">	<span data-highlight="character.special" style="color: #d33682;">@</span><span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="operator" style="color: #859900;">$(<span data-highlight="string" style="color: #2aa198;">name</span>)</span>
</div><div class="line" data-line="125">	<span data-highlight="character.special" style="color: #d33682;">@</span><span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="operator" style="color: #859900;">$&lbrace;<span data-highlight="string" style="color: #2aa198;">name2</span>&rbrace;</span>
</div><div class="line" data-line="126">	<span data-highlight="character.special" style="color: #d33682;">@</span><span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="operator" style="color: #859900;">$<span data-highlight="string" style="color: #2aa198;">n</span></span><span data-highlight="variable.parameter" style="color: #268bd2;">ame</span>    <span data-highlight="comment" style="color: #93a1a1;"># This won&#39;t work, treated as <span data-highlight="operator" style="color: #859900;">$(<span data-highlight="string" style="color: #2aa198;">n</span>)</span>ame.</span>
</div><div class="line" data-line="127">	<span data-highlight="character.special" style="color: #d33682;">@</span><span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="operator" style="color: #859900;">$(<span data-highlight="string" style="color: #2aa198;">name3</span>)</span> <span data-highlight="comment" style="color: #93a1a1;"># Unknown variables are treated as empty strings.</span>
</div><div class="line" data-line="128">
</div><div class="line" data-line="129"><span data-highlight="comment" style="color: #93a1a1;"># There are 4 places to set variables.</span>
</div><div class="line" data-line="130"><span data-highlight="comment" style="color: #93a1a1;"># In order of priority from highest to lowest:</span>
</div><div class="line" data-line="131"><span data-highlight="comment" style="color: #93a1a1;"># 1: commandline arguments</span>
</div><div class="line" data-line="132"><span data-highlight="comment" style="color: #93a1a1;"># 2: Makefile</span>
</div><div class="line" data-line="133"><span data-highlight="comment" style="color: #93a1a1;"># 3: shell environment variables - make imports these automatically.</span>
</div><div class="line" data-line="134"><span data-highlight="comment" style="color: #93a1a1;"># 4: make has some predefined variables</span>
</div><div class="line" data-line="135">
</div><div class="line" data-line="136"><span data-highlight="string.special.symbol" style="color: #657b83;">name4</span> <span data-highlight="operator" style="color: #859900;">?=</span> Jean
</div><div class="line" data-line="137"><span data-highlight="comment" style="color: #93a1a1;"># Only set the variable if environment variable is not already defined.</span>
</div><div class="line" data-line="138">
</div><div class="line" data-line="139"><span data-highlight="keyword" style="color: #859900;">override</span> <span data-highlight="string.special.symbol" style="color: #657b83;">name5</span> <span data-highlight="operator" style="color: #859900;">=</span> David
</div><div class="line" data-line="140"><span data-highlight="comment" style="color: #93a1a1;"># Stops commandline arguments from changing this variable.</span>
</div><div class="line" data-line="141">
</div><div class="line" data-line="142"><span data-highlight="string.special.symbol" style="color: #657b83;">name4</span> <span data-highlight="operator" style="color: #859900;">+=</span>grey
</div><div class="line" data-line="143"><span data-highlight="comment" style="color: #93a1a1;"># Append values to variable (includes a space).</span>
</div><div class="line" data-line="144">
</div><div class="line" data-line="145"><span data-highlight="comment" style="color: #93a1a1;"># Pattern-specific variable values (GNU extension).</span>
</div><div class="line" data-line="146">echo: <span data-highlight="string.special.symbol" style="color: #657b83;">name2</span> <span data-highlight="operator" style="color: #859900;">=</span> Sara # True within the matching rule
</div><div class="line" data-line="147">	<span data-highlight="comment" style="color: #93a1a1;"># and also within its remade recursive dependencies</span>
</div><div class="line" data-line="148">	<span data-highlight="comment" style="color: #93a1a1;"># (except it can break when your graph gets too complicated!)</span>
</div><div class="line" data-line="149">
</div><div class="line" data-line="150"><span data-highlight="comment" style="color: #93a1a1;"># Some variables defined automatically by make.</span>
</div><div class="line" data-line="151"><span data-highlight="function" style="color: #268bd2;">echo_inbuilt</span><span data-highlight="operator" style="color: #859900;">:</span>
</div><div class="line" data-line="152">	<span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="operator" style="color: #859900;">$(<span data-highlight="string" style="color: #2aa198;">CC</span>)</span>
</div><div class="line" data-line="153">	<span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="operator" style="color: #859900;">$&lbrace;<span data-highlight="string" style="color: #2aa198;">CXX</span>&rbrace;</span>
</div><div class="line" data-line="154">	<span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="operator" style="color: #859900;">$(<span data-highlight="string" style="color: #2aa198;">FC</span>)</span>
</div><div class="line" data-line="155">	<span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="operator" style="color: #859900;">$&lbrace;<span data-highlight="string" style="color: #2aa198;">CFLAGS</span>&rbrace;</span>
</div><div class="line" data-line="156">	<span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="operator" style="color: #859900;">$(<span data-highlight="string" style="color: #2aa198;">CPPFLAGS</span>)</span>
</div><div class="line" data-line="157">	<span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="operator" style="color: #859900;">$&lbrace;<span data-highlight="string" style="color: #2aa198;">CXXFLAGS</span>&rbrace;</span>
</div><div class="line" data-line="158">	<span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="operator" style="color: #859900;">$(<span data-highlight="string" style="color: #2aa198;">LDFLAGS</span>)</span>
</div><div class="line" data-line="159">	<span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="operator" style="color: #859900;">$&lbrace;<span data-highlight="string" style="color: #2aa198;">LDLIBS</span>&rbrace;</span>
</div><div class="line" data-line="160">
</div><div class="line" data-line="161"><span data-highlight="comment" style="color: #93a1a1;">#-----------------------------------------------------------------------</span>
</div><div class="line" data-line="162"><span data-highlight="comment" style="color: #93a1a1;"># Variables 2</span>
</div><div class="line" data-line="163"><span data-highlight="comment" style="color: #93a1a1;">#-----------------------------------------------------------------------</span>
</div><div class="line" data-line="164">
</div><div class="line" data-line="165"><span data-highlight="comment" style="color: #93a1a1;"># The first type of variables are evaluated each time they are used.</span>
</div><div class="line" data-line="166"><span data-highlight="comment" style="color: #93a1a1;"># This can be expensive, so a second type of variable exists which is</span>
</div><div class="line" data-line="167"><span data-highlight="comment" style="color: #93a1a1;"># only evaluated once. (This is a GNU make extension)</span>
</div><div class="line" data-line="168">
</div><div class="line" data-line="169"><span data-highlight="string.special.symbol" style="color: #657b83;">var</span> <span data-highlight="operator" style="color: #859900;">:=</span> hello
</div><div class="line" data-line="170"><span data-highlight="string.special.symbol" style="color: #657b83;">var2</span> <span data-highlight="operator" style="color: #859900;">::=</span> <span data-highlight="operator" style="color: #859900;">$(<span data-highlight="string" style="color: #2aa198;">var</span>)</span> hello
</div><div class="line" data-line="171"><span data-highlight="comment" style="color: #93a1a1;">#:= and ::= are equivalent.</span>
</div><div class="line" data-line="172">
</div><div class="line" data-line="173"><span data-highlight="comment" style="color: #93a1a1;"># These variables are evaluated procedurally (in the order that they</span>
</div><div class="line" data-line="174"><span data-highlight="comment" style="color: #93a1a1;"># appear), thus breaking with the rest of the language !</span>
</div><div class="line" data-line="175">
</div><div class="line" data-line="176"><span data-highlight="comment" style="color: #93a1a1;"># This doesn&#39;t work</span>
</div><div class="line" data-line="177"><span data-highlight="string.special.symbol" style="color: #657b83;">var3</span> <span data-highlight="operator" style="color: #859900;">::=</span> <span data-highlight="operator" style="color: #859900;">$(<span data-highlight="string" style="color: #2aa198;">var4</span>)</span> and good luck
</div><div class="line" data-line="178"><span data-highlight="string.special.symbol" style="color: #657b83;">var4</span> <span data-highlight="operator" style="color: #859900;">::=</span> good night
</div><div class="line" data-line="179">
</div><div class="line" data-line="180"><span data-highlight="comment" style="color: #93a1a1;">#-----------------------------------------------------------------------</span>
</div><div class="line" data-line="181"><span data-highlight="comment" style="color: #93a1a1;"># Functions</span>
</div><div class="line" data-line="182"><span data-highlight="comment" style="color: #93a1a1;">#-----------------------------------------------------------------------</span>
</div><div class="line" data-line="183">
</div><div class="line" data-line="184"><span data-highlight="comment" style="color: #93a1a1;"># make has lots of functions available.</span>
</div><div class="line" data-line="185">
</div><div class="line" data-line="186"><span data-highlight="string.special.symbol" style="color: #657b83;">sourcefiles</span> <span data-highlight="operator" style="color: #859900;">=</span> <span data-highlight="operator" style="color: #859900;">$</span><span data-highlight="operator" style="color: #859900;">(</span><span data-highlight="function.builtin" style="color: #268bd2;">wildcard</span> *.c */*.c<span data-highlight="operator" style="color: #859900;">)</span>
</div><div class="line" data-line="187"><span data-highlight="string.special.symbol" style="color: #657b83;">objectfiles</span> <span data-highlight="operator" style="color: #859900;">=</span> <span data-highlight="operator" style="color: #859900;">$</span><span data-highlight="operator" style="color: #859900;">(</span><span data-highlight="function.builtin" style="color: #268bd2;">patsubst</span> %.c,%.o,<span data-highlight="operator" style="color: #859900;">$(<span data-highlight="string" style="color: #2aa198;">sourcefiles</span>)</span><span data-highlight="operator" style="color: #859900;">)</span>
</div><div class="line" data-line="188">
</div><div class="line" data-line="189"><span data-highlight="comment" style="color: #93a1a1;"># Format is $(func arg0,arg1,arg2...)</span>
</div><div class="line" data-line="190">
</div><div class="line" data-line="191"><span data-highlight="comment" style="color: #93a1a1;"># Some examples</span>
</div><div class="line" data-line="192"><span data-highlight="function" style="color: #268bd2;">ls</span><span data-highlight="operator" style="color: #859900;">:</span>	* src/*
</div><div class="line" data-line="193">	<span data-highlight="character.special" style="color: #d33682;">@</span><span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="operator" style="color: #859900;">$</span><span data-highlight="operator" style="color: #859900;">(</span><span data-highlight="function.builtin" style="color: #268bd2;">filter</span> %.txt, <span data-highlight="operator" style="color: #859900;">$</span><span data-highlight="character.special" style="color: #d33682;">^</span><span data-highlight="operator" style="color: #859900;">)</span>
</div><div class="line" data-line="194">	<span data-highlight="character.special" style="color: #d33682;">@</span><span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="operator" style="color: #859900;">$</span><span data-highlight="operator" style="color: #859900;">(</span><span data-highlight="function.builtin" style="color: #268bd2;">notdir</span> <span data-highlight="operator" style="color: #859900;">$</span><span data-highlight="character.special" style="color: #d33682;">^</span><span data-highlight="operator" style="color: #859900;">)</span>
</div><div class="line" data-line="195">	<span data-highlight="character.special" style="color: #d33682;">@</span><span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="operator" style="color: #859900;">$</span><span data-highlight="operator" style="color: #859900;">(</span><span data-highlight="function.builtin" style="color: #268bd2;">join</span> <span data-highlight="operator" style="color: #859900;">$</span><span data-highlight="operator" style="color: #859900;">(</span><span data-highlight="function.builtin" style="color: #268bd2;">dir</span> <span data-highlight="operator" style="color: #859900;">$</span><span data-highlight="character.special" style="color: #d33682;">^</span><span data-highlight="operator" style="color: #859900;">)</span>,<span data-highlight="operator" style="color: #859900;">$</span><span data-highlight="operator" style="color: #859900;">(</span><span data-highlight="function.builtin" style="color: #268bd2;">notdir</span> <span data-highlight="operator" style="color: #859900;">$</span><span data-highlight="character.special" style="color: #d33682;">^</span><span data-highlight="operator" style="color: #859900;">)</span><span data-highlight="operator" style="color: #859900;">)</span>
</div><div class="line" data-line="196">
</div><div class="line" data-line="197"><span data-highlight="comment" style="color: #93a1a1;">#-----------------------------------------------------------------------</span>
</div><div class="line" data-line="198"><span data-highlight="comment" style="color: #93a1a1;"># Directives</span>
</div><div class="line" data-line="199"><span data-highlight="comment" style="color: #93a1a1;">#-----------------------------------------------------------------------</span>
</div><div class="line" data-line="200">
</div><div class="line" data-line="201"><span data-highlight="comment" style="color: #93a1a1;"># Include other makefiles, useful for platform specific code</span>
</div><div class="line" data-line="202"><span data-highlight="keyword.import" style="color: #cb4b16;">include</span> <span data-highlight="string.special.path" style="color: #6c71c4;">foo.mk</span>
</div><div class="line" data-line="203">
</div><div class="line" data-line="204"><span data-highlight="string.special.symbol" style="color: #657b83;">sport</span> <span data-highlight="operator" style="color: #859900;">=</span> tennis
</div><div class="line" data-line="205"><span data-highlight="comment" style="color: #93a1a1;"># Conditional compilation</span>
</div><div class="line" data-line="206"><span data-highlight="function" style="color: #268bd2;">report</span><span data-highlight="operator" style="color: #859900;">:</span>
</div><div class="line" data-line="207"><span data-highlight="keyword.conditional" style="color: #859900;">ifeq</span> (<span data-highlight="operator" style="color: #859900;">$(<span data-highlight="string" style="color: #2aa198;">sport</span>)</span>,tennis)
</div><div class="line" data-line="208">	<span data-highlight="character.special" style="color: #d33682;">@</span><span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="string" style="color: #2aa198;">&#39;game, set, match&#39;</span>
</div><div class="line" data-line="209"><span data-highlight="keyword.conditional" style="color: #859900;">else</span>
</div><div class="line" data-line="210">	<span data-highlight="character.special" style="color: #d33682;">@</span><span data-highlight="function.builtin" style="color: #268bd2;">echo</span> <span data-highlight="string" style="color: #2aa198;">&quot;They think it&#39;s all over; it is now&quot;</span>
</div><div class="line" data-line="211"><span data-highlight="keyword.conditional" style="color: #859900;">endif</span>
</div><div class="line" data-line="212">
</div><div class="line" data-line="213"><span data-highlight="comment" style="color: #93a1a1;"># There are also ifneq, ifdef, ifndef</span>
</div><div class="line" data-line="214">
</div><div class="line" data-line="215"><span data-highlight="string.special.symbol" style="color: #657b83;">foo</span> <span data-highlight="operator" style="color: #859900;">=</span> true
</div><div class="line" data-line="216">
</div><div class="line" data-line="217"><span data-highlight="keyword.conditional" style="color: #859900;">ifdef</span> <span data-highlight="operator" style="color: #859900;">$(<span data-highlight="string" style="color: #2aa198;">foo</span>)</span>
</div><div class="line" data-line="218"><span data-highlight="string.special.symbol" style="color: #657b83;">bar</span> <span data-highlight="operator" style="color: #859900;">=</span> &#39;hello&#39;
</div><div class="line" data-line="219"><span data-highlight="keyword.conditional" style="color: #859900;">endif</span>
</div></code></pre>